exports.id=645,exports.ids=[645],exports.modules={78466:(e,t,r)=>{Promise.resolve().then(r.bind(r,93482))},93482:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ChessGame_ChessGame});var a=r(30784),s=r(89754),l=r(9885),n=r(57556),i=r(91971),o=r(10566),d=r(59610);let cn=(...e)=>(0,d.m)((0,o.W)(e)),c=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=l.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...l},i)=>{let o=s?n.g7:"button";return a.jsx(o,{className:cn(c({variant:t,size:r,className:e})),ref:i,...l})});m.displayName="Button";let u=l.forwardRef(({className:e,type:t,...r},s)=>a.jsx("input",{type:t,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));u.displayName="Input";let Controls_Controls=({startGame:e,resetGame:t,type:r,depth:s,setDepth:l})=>(0,a.jsxs)("div",{className:"flex gap-4 mt-4",children:[a.jsx(m,{className:"w-full",onClick:()=>e(),children:"Start Game"}),a.jsx(m,{className:"w-full",onClick:()=>t(),children:"Reset Game"}),"minimax"===r&&a.jsx(u,{type:"number",placeholder:"Depth",min:1,max:5,value:s,onChange:e=>{let t=Number(e.target.value);l(t)}})]});var x=r(76959),f=r(52451),h=r.n(f);let MoveList_MoveItem=({move:e})=>a.jsx("li",{className:"flex justify-between gap-x-6 py-2 px-4",children:(0,a.jsxs)("div",{className:"flex min-w-0 gap-x-6",children:[a.jsx(h(),{className:"flex-none rounded-full",src:(0,x.vX)(e.color,e.piece),alt:"Chess Piece",width:45,height:45}),(0,a.jsxs)("div",{className:"min-w-0 flex-auto",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold leading-6 text-gray-900",children:["b"===e.color?"Black":"White"," Move"]}),(0,a.jsxs)("p",{className:"mt-1 truncate text-xs leading-5 text-gray-500",children:["From: ",e.from," | To: ",e.to]})]})]})}),Card_PlayerInfoCard=({id:e,name:t,inGame:r})=>a.jsx("div",{className:"bg-white",children:(0,a.jsxs)("div",{className:"w-auto flex pl-4 flex-col items-center",children:[r&&a.jsx("div",{className:"font-bold text-center",style:{fontSize:"25px"},children:t||"none"}),a.jsx("div",{children:a.jsx("img",{src:(0,x.KK)(t),className:"h-[250px]",alt:">"})}),!r&&a.jsx("div",{className:"font-bold text-center",style:{fontSize:"25px"},children:t||"none"})]})}),MoveList_MoveList=({moves:e,bot:t})=>a.jsx("div",{children:a.jsx("div",{className:"flex pt-4 pb-4",children:(0,a.jsxs)("ul",{className:"max-h-[550px] h-[550px] w-[450px] overflow-y-auto divide-y border rounded-lg",children:[a.jsx("li",{className:"sticky top-0",children:a.jsx(Card_PlayerInfoCard,{id:t.id,name:t.name,inGame:!0})}),a.jsx("div",{children:e?.map((e,t)=>a.jsx(MoveList_MoveItem,{move:e},t))})]})})});var v=r(44890);let reverseArray=e=>e.slice().reverse(),p=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],b=reverseArray(p),j=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],g=[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],y=reverseArray(g),w=[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],C=reverseArray(w),N=[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],k=[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]],M=reverseArray(k),evaluateBoard=e=>{let t=0;for(let r=0;r<8;r++)for(let a=0;a<8;a++)t+=getPieceValue(e[r][a],r,a);return t},getPieceValue=(e,t,r)=>{if(null===e)return 0;let a=function(e,t,r,a){switch(e){case"p":return 10+(t?p[a][r]:b[a][r]);case"n":return 30+j[a][r];case"b":return 30+(t?g[a][r]:y[a][r]);case"r":return 50+(t?w[a][r]:C[a][r]);case"q":return 90+N[a][r];case"k":return 900+(t?k[a][r]:M[a][r]);default:throw"Unknown piece type: "+e}}(e.type,"w"===e.color,t,r);return"w"===e.color?a:-a},hooks_useChess=e=>{let[t,r]=(0,l.useState)(new v.qQ),[a,s]=(0,l.useState)(!1),[n,i]=(0,l.useState)([]),[o,d]=(0,l.useState)(3),[c,m]=(0,l.useState)(),getComputerType=()=>"random"===e?calculateRandomMove:"computer"===e?calculateBestMove:calculateMinimaxMove,makeMove=e=>{let a={...t},s=a.move(e);return s&&(i(e=>[s,...e]),r(a)),s},calculateRandomMove=()=>{let e=t.moves();if(t.game_over()||t.in_draw()||e.length<=0)return;let r=Math.floor(Math.random()*e.length);makeMove(e[r])},calculateBestMove=()=>{let e=t.moves();if(t.game_over()||t.in_draw()||e.length<=0)return;let r=null,a=-9999;for(let s of e){t.move(s);let e=-evaluateBoard(t.board());t.undo(),e>=a&&(a=e,r=s)}null!==r&&makeMove(r)},minimax=(e,t,r,a,s)=>{if(e<=0)return-evaluateBoard(t.board());let l=t.moves();if(s){let n=-9999;for(let i of l)if(t.move(i),n=Math.max(n,minimax(e-1,t,r,a,!s)),t.undo(),a<=(r=Math.max(r,n)))break;return n}{let n=9999;for(let i of l)if(t.move(i),n=Math.min(n,minimax(e-1,t,r,a,!s)),t.undo(),(a=Math.min(a,n))<=r)break;return n}},calculateMinimaxMove=()=>{let e=t.moves();if(t.game_over()||t.in_draw()||e.length<=0)return;let r=null,a=-9999;for(let s of e){t.move(s);let e=minimax(o-1,t,-1e4,1e4,!1);t.undo(),e>=a&&(a=e,r=s)}null!==r&&makeMove(r)},resetGame=()=>{let e={...t};e.reset(),r(e),i([]),c&&clearTimeout(c),s(!1)};return{game:t,playing:a,moves:n,depth:o,setDepth:d,onPieceDrop:(e,t)=>{if(!a)return!1;let r=makeMove({from:e,to:t,promotion:"q"});if(null===r)return!1;let s=setTimeout(getComputerType(),500);return m(s),!0},startGame:()=>{resetGame(),s(!0)},resetGame}};var _=r(94771),S=r(13696),P=r(12618),G=r(24034),B=r(51377),z=r(79636),L=r.n(z);let Card_PlayerCard=({avtRef:e,name:t,link:r})=>a.jsx("div",{className:"flex pt-4 pb-4",children:a.jsx(_.default,{className:"w-full justify-center relative",children:(0,a.jsxs)(P.default,{align:"middle",children:[a.jsx(G.default,{flex:"50px",children:a.jsx(S.ZP,{src:e||"https://bit.ly/3FzLkSs"})}),a.jsx(G.default,{className:"flex-auto font-bold",style:{fontSize:"20px"},children:t}),a.jsx(G.default,{children:a.jsx(B.Z,{menu:{items:[{label:"1st menu item",key:"1"},{label:"2nd menu item",key:"2"},{label:"3rd menu item",key:"3"}]},placement:"bottomRight",arrow:{pointAtCenter:!0},children:a.jsx(L(),{className:"flex",children:a.jsx("img",{src:(0,x.KK)("meatballs-menu"),width:"20px",height:"20px",alt:">"})})})})]})})}),BotCard=({id:e,name:t})=>a.jsx("div",{className:"hover:opacity-60",children:a.jsx("img",{className:"w-[60px] h-[60px] border-2",src:(0,x.KK)(t),alt:"character"})}),Card_BotSelector=({botList:e,onSelectBot:t})=>(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-bold text-center pt-4",style:{fontSize:"20px"},children:"Ez Bot"}),a.jsx("div",{className:"w-auto flex row-auto pl-4 flex-wrap",children:e.map(e=>a.jsx("div",{className:"p-2",onClick:()=>{t(e)},children:a.jsx(BotCard,{id:e.id,name:e.name})},e.id))})]}),Card_PrepareCard=({botList:e,onSelectBot:t,bot:r})=>a.jsx("div",{children:a.jsx("div",{className:"flex pt-4 pb-4",children:(0,a.jsxs)("ul",{className:"max-h-[550px] h-[550px] w-auto overflow-y-auto divide-y border rounded-lg",children:[a.jsx("div",{className:"w-[450px] text-center font-bold flex-wrap p-4",style:{fontSize:"27px"},children:"Play Chess Against a Computer"}),a.jsx("div",{className:"h-[300px]",children:a.jsx(Card_PlayerInfoCard,{id:r.id,name:r.name,inGame:!1})}),a.jsx("div",{children:a.jsx(Card_BotSelector,{botList:e,onSelectBot:t})})]})})}),ChessGame_ChessGame=({id:e,type:t})=>{let{game:r,moves:n,playing:i,depth:o,setDepth:d,onPieceDrop:c,startGame:m,resetGame:u}=hooks_useChess(t),[f,h]=(0,l.useState)([]),[v,p]=(0,l.useState)({id:"0",name:"shark"});return(0,l.useEffect)(()=>{h([{id:"0",name:"shark"},{id:"1",name:"elephant"},{id:"2",name:"owl"},{id:"3",name:"monkey"},{id:"4",name:"penguin"},{id:"5",name:"cat"}])},[]),(0,a.jsxs)("div",{className:"flex p-4 mt-8",children:[a.jsx("div",{className:"flex justify-center w-2/3",children:(0,a.jsxs)("div",{className:"w-[450px]",children:[a.jsx("div",{className:"",children:a.jsx(Card_PlayerCard,{avtRef:v?(0,x.KK)(v.name):"",name:v?v.name:"none",link:v?"/home":"/profile/chien"})}),!i&&a.jsx("div",{className:"absolute flex justify-center items-center w-[450px] h-[450px] z-10"}),a.jsx(s.r,{id:e,onPieceDrop:c,position:r.fen(),customBoardStyle:{borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.5)"}}),a.jsx("div",{className:"",children:a.jsx(Card_PlayerCard,{avtRef:"",name:"Chien",link:"/profile/chien"})})]})}),a.jsx("div",{className:"flex justify-center w-1/3",children:(0,a.jsxs)("div",{children:[i?a.jsx(MoveList_MoveList,{moves:n,bot:v||{id:"0",name:"shark"}}):a.jsx(Card_PrepareCard,{botList:f,onSelectBot:e=>{p(e)},bot:v||{id:"0",name:"shark"}}),a.jsx(Controls_Controls,{startGame:m,resetGame:u,type:t,depth:o,setDepth:d})]})})]})}},67697:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>o});var a=r(95153);let s=(0,a.createProxy)(String.raw`/home/nullchilly/code/git/web101/src/components/ChessGame/ChessGame.tsx`),{__esModule:l,$$typeof:n}=s,i=s.default,o=i}};