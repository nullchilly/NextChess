"use strict";exports.id=7,exports.ids=[7],exports.modules={15656:(e,t,r)=>{r.d(t,{qQ:()=>C});let i="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",n={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},s={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},o={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},a={b:[16,32,17,15],w:[-16,-32,-17,-15]},l={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},u=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],c=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],d={p:1,n:2,b:4,r:8,q:16,k:32},h=["n","b","r","q"],g={k:s.KSIDE_CASTLE,q:s.QSIDE_CASTLE},f={w:[{square:o.a1,flag:s.QSIDE_CASTLE},{square:o.h1,flag:s.KSIDE_CASTLE}],b:[{square:o.a8,flag:s.QSIDE_CASTLE},{square:o.h8,flag:s.KSIDE_CASTLE}]},p={b:1,w:6},v=["1-0","0-1","1/2-1/2","*"];function m(e){return -1!=="0123456789".indexOf(e)}function b(e){let t=15&e,r=e>>4;return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function y(e){return"w"===e?"b":"w"}function S(e,t,r,i,n,o,a=s.NORMAL){let l=i>>4;if("p"===n&&(7===l||0===l))for(let l=0;l<h.length;l++){let u=h[l];e.push({color:t,from:r,to:i,piece:n,captured:o,promotion:u,flags:a|s.PROMOTION})}else e.push({color:t,from:r,to:i,piece:n,captured:o,flags:a})}function O(e){let t=e.charAt(0);if(t>="a"&&t<="h"){let t=e.match(/[a-h]\d.*[a-h]\d/);if(t)return;return"p"}return"o"===(t=t.toLowerCase())?"k":t}function w(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class C{constructor(e=i){this._board=Array(128),this._turn="w",this._header={},this._kings={w:-1,b:-1},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(e)}clear(e=!1){this._board=Array(128),this._kings={w:-1,b:-1},this._turn="w",this._castling={w:0,b:0},this._epSquare=-1,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._updateSetup(this.fen())}removeHeader(e){e in this._header&&delete this._header[e]}load(e,t=!1){let r=e.split(/\s+/);r.length>=2&&r.length<6&&(e=r.concat(["-","-","0","1"].slice(-(6-r.length))).join(" ")),r=e.split(/\s+/);let{ok:i,error:n}=function(e){let t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};let r=parseInt(t[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};let i=parseInt(t[4],10);if(isNaN(i)||i<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};let n=t[0].split("/");if(8!==n.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let e=0;e<n.length;e++){let t=0,r=!1;for(let i=0;i<n[e].length;i++)if(m(n[e][i])){if(r)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};t+=parseInt(n[e][i],10),r=!0}else{if(!/^[prnbqkPRNBQK]$/.test(n[e][i]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};t+=1,r=!1}if(8!==t)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};for(let{color:e,regex:r}of[{color:"white",regex:/K/g},{color:"black",regex:/k/g}]){if(!r.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${e} king`};if((t[0].match(r)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${e} kings`}}return{ok:!0}}(e);if(!i)throw Error(n);let a=r[0],l=0;this.clear(t);for(let e=0;e<a.length;e++){let t=a.charAt(e);if("/"===t)l+=8;else if(m(t))l+=parseInt(t,10);else{let e=t<"a"?"w":"b";this.put({type:t.toLowerCase(),color:e},b(l)),l++}}this._turn=r[1],r[2].indexOf("K")>-1&&(this._castling.w|=s.KSIDE_CASTLE),r[2].indexOf("Q")>-1&&(this._castling.w|=s.QSIDE_CASTLE),r[2].indexOf("k")>-1&&(this._castling.b|=s.KSIDE_CASTLE),r[2].indexOf("q")>-1&&(this._castling.b|=s.QSIDE_CASTLE),this._epSquare="-"===r[3]?-1:o[r[3]],this._halfMoves=parseInt(r[4],10),this._moveNumber=parseInt(r[5],10),this._updateSetup(this.fen())}fen(){let e=0,t="";for(let r=o.a8;r<=o.h1;r++){if(this._board[r]){e>0&&(t+=e,e=0);let{color:i,type:n}=this._board[r];t+="w"===i?n.toUpperCase():n.toLowerCase()}else e++;r+1&136&&(e>0&&(t+=e),r!==o.h1&&(t+="/"),e=0,r+=8)}let r="";this._castling.w&s.KSIDE_CASTLE&&(r+="K"),this._castling.w&s.QSIDE_CASTLE&&(r+="Q"),this._castling.b&s.KSIDE_CASTLE&&(r+="k"),this._castling.b&s.QSIDE_CASTLE&&(r+="q"),r=r||"-";let i="-";if(-1!==this._epSquare){let e=this._epSquare+("w"===this._turn?16:-16);for(let t of[e+1,e-1]){if(136&t)continue;let e=this._turn;if(this._board[t]?.color===e&&this._board[t]?.type==="p"){this._makeMove({color:e,from:t,to:this._epSquare,piece:"p",captured:"p",flags:s.EP_CAPTURE});let r=!this._isKingAttacked(e);if(this._undoMove(),r){i=b(this._epSquare);break}}}}return[t,this._turn,r,i,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==i?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(i)}get(e){return this._board[o[e]]||!1}put({type:e,color:t},r){if(-1==="pnbrqkPNBRQK".indexOf(e.toLowerCase())||!(r in o))return!1;let i=o[r];return("k"!=e||-1==this._kings[t]||this._kings[t]==i)&&(this._board[i]={type:e,color:t},"k"===e&&(this._kings[t]=i),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}remove(e){let t=this.get(e);return delete this._board[o[e]],t&&"k"===t.type&&(this._kings[t.color]=-1),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){let e=this._board[o.e1]?.type==="k"&&this._board[o.e1]?.color==="w",t=this._board[o.e8]?.type==="k"&&this._board[o.e8]?.color==="b";e&&this._board[o.a1]?.type==="r"&&this._board[o.a1]?.color==="w"||(this._castling.w&=~s.QSIDE_CASTLE),e&&this._board[o.h1]?.type==="r"&&this._board[o.h1]?.color==="w"||(this._castling.w&=~s.KSIDE_CASTLE),t&&this._board[o.a8]?.type==="r"&&this._board[o.a8]?.color==="b"||(this._castling.b&=~s.QSIDE_CASTLE),t&&this._board[o.h8]?.type==="r"&&this._board[o.h8]?.color==="b"||(this._castling.b&=~s.KSIDE_CASTLE)}_updateEnPassantSquare(){if(-1===this._epSquare)return;let e=this._epSquare+("w"===this._turn?-16:16),t=this._epSquare+("w"===this._turn?16:-16);if(null!==this._board[e]||null!==this._board[this._epSquare]||this._board[t]?.color!==y(this._turn)||this._board[t]?.type!=="p"){this._epSquare=-1;return}[t+1,t-1].some(e=>!(136&e)&&this._board[e]?.color===this._turn&&this._board[e]?.type==="p")||(this._epSquare=-1)}_attacked(e,t){for(let r=o.a8;r<=o.h1;r++){if(136&r){r+=7;continue}if(void 0===this._board[r]||this._board[r].color!==e)continue;let i=this._board[r],n=r-t;if(0===n)continue;let s=n+119;if(u[s]&d[i.type]){if("p"===i.type){if(n>0){if("w"===i.color)return!0}else if("b"===i.color)return!0;continue}if("n"===i.type||"k"===i.type)return!0;let e=c[s],o=r+e,a=!1;for(;o!==t;){if(null!=this._board[o]){a=!0;break}o+=e}if(!a)return!0}}return!1}_isKingAttacked(e){let t=this._kings[e];return -1!==t&&this._attacked(y(e),t)}isAttacked(e,t){return this._attacked(t,o[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){let e={b:0,n:0,r:0,q:0,k:0,p:0},t=[],r=0,i=0;for(let n=o.a8;n<=o.h1;n++){if(i=(i+1)%2,136&n){n+=7;continue}let s=this._board[n];s&&(e[s.type]=s.type in e?e[s.type]+1:1,"b"===s.type&&t.push(i),r++)}if(2===r||3===r&&(1===e.b||1===e.n))return!0;if(r===e.b+2){let e=0,r=t.length;for(let i=0;i<r;i++)e+=t[i];if(0===e||e===r)return!0}return!1}isThreefoldRepetition(){let e=[],t={},r=!1;for(;;){let t=this._undoMove();if(!t)break;e.push(t)}for(;;){let i=this.fen().split(" ").slice(0,4).join(" ");t[i]=i in t?t[i]+1:1,t[i]>=3&&(r=!0);let n=e.pop();if(n)this._makeMove(n);else break}return r}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:r}={}){let i=this._moves({square:t,piece:r});return e?i.map(e=>this._makePretty(e)):i.map(e=>this._moveToSan(e,i))}_moves({legal:e=!0,piece:t,square:r}={}){let i=r?r.toLowerCase():void 0,n=t?.toLowerCase(),u=[],c=this._turn,d=y(c),h=o.a8,g=o.h1,f=!1;if(i){if(!(i in o))return[];h=g=o[i],f=!0}for(let e=h;e<=g;e++){let t;if(136&e){e+=7;continue}if(!this._board[e]||this._board[e].color===d)continue;let{type:r}=this._board[e];if("p"===r){if(n&&n!==r)continue;t=e+a[c][0],this._board[t]||(S(u,c,e,t,"p"),t=e+a[c][1],p[c]!==e>>4||this._board[t]||S(u,c,e,t,"p",void 0,s.BIG_PAWN));for(let r=2;r<4;r++)136&(t=e+a[c][r])||(this._board[t]?.color===d?S(u,c,e,t,"p",this._board[t].type,s.CAPTURE):t===this._epSquare&&S(u,c,e,t,"p","p",s.EP_CAPTURE))}else{if(n&&n!==r)continue;for(let i=0,n=l[r].length;i<n;i++){let n=l[r][i];for(t=e;!(136&(t+=n));){if(this._board[t]){if(this._board[t].color===c)break;S(u,c,e,t,r,this._board[t].type,s.CAPTURE);break}if(S(u,c,e,t,r),"n"===r||"k"===r)break}}}}if((void 0===n||"k"===n)&&(!f||g===this._kings[c])){if(this._castling[c]&s.KSIDE_CASTLE){let e=this._kings[c],t=e+2;this._board[e+1]||this._board[t]||this._attacked(d,this._kings[c])||this._attacked(d,e+1)||this._attacked(d,t)||S(u,c,this._kings[c],t,"k",void 0,s.KSIDE_CASTLE)}if(this._castling[c]&s.QSIDE_CASTLE){let e=this._kings[c],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(d,this._kings[c])||this._attacked(d,e-1)||this._attacked(d,t)||S(u,c,this._kings[c],t,"k",void 0,s.QSIDE_CASTLE)}}if(!e||-1===this._kings[c])return u;let v=[];for(let e=0,t=u.length;e<t;e++)this._makeMove(u[e]),this._isKingAttacked(c)||v.push(u[e]),this._undoMove();return v}move(e,{strict:t=!1}={}){let r=null;if("string"==typeof e)r=this._moveFromSan(e,t);else if("object"==typeof e){let t=this._moves();for(let i=0,n=t.length;i<n;i++)if(e.from===b(t[i].from)&&e.to===b(t[i].to)&&(!("promotion"in t[i])||e.promotion===t[i].promotion)){r=t[i];break}}if(!r){if("string"==typeof e)throw Error(`Invalid move: ${e}`);throw Error(`Invalid move: ${JSON.stringify(e)}`)}let i=this._makePretty(r);return this._makeMove(r),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){let t=this._turn,r=y(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&s.EP_CAPTURE&&("b"===this._turn?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),"k"===this._board[e.to].type){if(this._kings[t]=e.to,e.flags&s.KSIDE_CASTLE){let t=e.to-1,r=e.to+1;this._board[t]=this._board[r],delete this._board[r]}else if(e.flags&s.QSIDE_CASTLE){let t=e.to+1,r=e.to-2;this._board[t]=this._board[r],delete this._board[r]}this._castling[t]=0}if(this._castling[t]){for(let r=0,i=f[t].length;r<i;r++)if(e.from===f[t][r].square&&this._castling[t]&f[t][r].flag){this._castling[t]^=f[t][r].flag;break}}if(this._castling[r]){for(let t=0,i=f[r].length;t<i;t++)if(e.to===f[r][t].square&&this._castling[r]&f[r][t].flag){this._castling[r]^=f[r][t].flag;break}}e.flags&s.BIG_PAWN?"b"===t?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=-1,"p"===e.piece?this._halfMoves=0:e.flags&(s.CAPTURE|s.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,"b"===t&&this._moveNumber++,this._turn=r}undo(){let e=this._undoMove();return e?this._makePretty(e):null}_undoMove(){let e=this._history.pop();if(void 0===e)return null;let t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;let r=this._turn,i=y(r);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured){if(t.flags&s.EP_CAPTURE){let e;e="b"===r?t.to-16:t.to+16,this._board[e]={type:"p",color:i}}else this._board[t.to]={type:t.captured,color:i}}if(t.flags&(s.KSIDE_CASTLE|s.QSIDE_CASTLE)){let e,r;t.flags&s.KSIDE_CASTLE?(e=t.to+1,r=t.to-1):(e=t.to-2,r=t.to+1),this._board[e]=this._board[r],delete this._board[r]}return t}pgn({newline:e="\n",maxWidth:t=0}={}){let r=[],i=!1;for(let t in this._header)r.push("["+t+' "'+this._header[t]+'"]'+e),i=!0;i&&this._history.length&&r.push(e);let n=e=>{let t=this._comments[this.fen()];if(void 0!==t){let r=e.length>0?" ":"";e=`${e}${r}{${t}}`}return e},s=[];for(;this._history.length>0;)s.push(this._undoMove());let o=[],a="";for(0===s.length&&o.push(n(""));s.length>0;){a=n(a);let e=s.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(a.length&&o.push(a),a=this._moveNumber+".");else{let e=`${this._moveNumber}. ...`;a=a?`${a} ${e}`:e}a=a+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(a.length&&o.push(n(a)),void 0!==this._header.Result&&o.push(this._header.Result),0===t)return r.join("")+o.join(" ");let l=function(){return r.length>0&&" "===r[r.length-1]&&(r.pop(),!0)},u=0;for(let i=0;i<o.length;i++){if(u+o[i].length>t&&o[i].includes("{")){u=function(i,n){for(let s of n.split(" "))if(s){if(i+s.length>t){for(;l();)i--;r.push(e),i=0}r.push(s),i+=s.length,r.push(" "),i++}return l()&&i--,i}(u,o[i]);continue}u+o[i].length>t&&0!==i?(" "===r[r.length-1]&&r.pop(),r.push(e),u=0):0!==i&&(r.push(" "),u++),r.push(o[i]),u+=o[i].length}return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{strict:t=!1,newlineChar:r="\r?\n"}={}){function i(e){return e.replace(/\\/g,"\\")}e=e.trim();let n=RegExp("^(\\[((?:"+i(r)+")|.)*\\])((?:\\s*"+i(r)+"){2}|(?:\\s*"+i(r)+")*$)"),s=n.exec(e),o=s&&s.length>=2?s[1]:"";this.reset();let a=function(e){let t={},n=e.split(new RegExp(i(r))),s="",o="";for(let e=0;e<n.length;e++){let r=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;s=n[e].replace(r,"$1"),o=n[e].replace(r,"$2"),s.trim().length>0&&(t[s]=o)}return t}(o),l="";for(let e in a)"fen"===e.toLowerCase()&&(l=a[e]),this.header(e,a[e]);if(t){if("1"===a.SetUp){if(!("FEN"in a))throw Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(a.FEN,!0)}}else l&&this.load(l,!0);let u=function(e){return e=e.replace(RegExp(i(r),"g")," "),`{${Array.from(e.slice(1,e.length-1)).map(function(e){return 128>e.charCodeAt(0)?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()}).join("")}}`},c=e.replace(o,"").replace(RegExp(`({[^}]*})+?|;([^${i(r)}]*)`,"g"),function(e,t,r){return void 0!==t?u(t):" "+u(`{${r.slice(1)}}`)}).replace(RegExp(i(r),"g")," "),d=/(\([^()]+\))+?/g;for(;d.test(c);)c=c.replace(d,"");let h=(c=(c=(c=c.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).trim().split(new RegExp(/\s+/));h=h.filter(e=>""!==e);let g="";for(let e=0;e<h.length;e++){let r=function(e){if(e.startsWith("{")&&e.endsWith("}")){var t;return 0==(t=e.slice(1,e.length-1)).length?"":decodeURIComponent("%"+(t.match(/.{1,2}/g)||[]).join("%"))}}(h[e]);if(void 0!==r){this._comments[this.fen()]=r;continue}let i=this._moveFromSan(h[e],t);if(null==i){if(v.indexOf(h[e])>-1)g=h[e];else throw Error(`Invalid move in PGN: ${h[e]}`)}else g="",this._makeMove(i)}g&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",g)}_moveToSan(e,t){let r="";if(e.flags&s.KSIDE_CASTLE)r="O-O";else if(e.flags&s.QSIDE_CASTLE)r="O-O-O";else{if("p"!==e.piece){let i=function(e,t){let r=e.from,i=e.to,n=e.piece,s=0,o=0,a=0;for(let e=0,l=t.length;e<l;e++){let l=t[e].from,u=t[e].to,c=t[e].piece;n===c&&r!==l&&i===u&&(s++,r>>4==l>>4&&o++,(15&r)==(15&l)&&a++)}return s>0?o>0&&a>0?b(r):a>0?b(r).charAt(1):b(r).charAt(0):""}(e,t);r+=e.piece.toUpperCase()+i}e.flags&(s.CAPTURE|s.EP_CAPTURE)&&("p"===e.piece&&(r+=b(e.from)[0]),r+="x"),r+=b(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,t=!1){let r,i,n,s,a;let l=w(e),u=O(l),c=this._moves({legal:!0,piece:u});for(let e=0,t=c.length;e<t;e++)if(l===w(this._moveToSan(c[e],c)))return c[e];if(t)return null;let d=!1;if((i=l.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/))?(r=i[1],n=i[2],s=i[3],a=i[4],1==n.length&&(d=!0)):(i=l.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/))&&(r=i[1],n=i[2],s=i[3],a=i[4],1==n.length&&(d=!0)),u=O(l),c=this._moves({legal:!0,piece:r||u}),!s)return null;for(let e=0,t=c.length;e<t;e++)if(n){if((!r||r.toLowerCase()==c[e].piece)&&o[n]==c[e].from&&o[s]==c[e].to&&(!a||a.toLowerCase()==c[e].promotion))return c[e];if(d){let t=b(c[e].from);if((!r||r.toLowerCase()==c[e].piece)&&o[s]==c[e].to&&(n==t[0]||n==t[1])&&(!a||a.toLowerCase()==c[e].promotion))return c[e]}}else if(l===w(this._moveToSan(c[e],c)).replace("x",""))return c[e];return null}ascii(){let e="   +------------------------+\n";for(let t=o.a8;t<=o.h1;t++){if(0==(15&t)&&(e+=" "+"87654321"[t>>4]+" |"),this._board[t]){let r=this._board[t].type,i=this._board[t].color,n="w"===i?r.toUpperCase():r.toLowerCase();e+=" "+n+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+"   +------------------------+\n     a  b  c  d  e  f  g  h"}perft(e){let t=this._moves({legal:!1}),r=0,i=this._turn;for(let n=0,s=t.length;n<s;n++)this._makeMove(t[n]),!this._isKingAttacked(i)&&(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}_makePretty(e){let{color:t,piece:r,from:i,to:o,flags:a,captured:l,promotion:u}=e,c="";for(let e in s)s[e]&a&&(c+=n[e]);let d=b(i),h=b(o),g={color:t,piece:r,from:d,to:h,san:this._moveToSan(e,this._moves({legal:!0})),flags:c,lan:d+h,before:this.fen(),after:""};return this._makeMove(e),g.after=this.fen(),this._undoMove(),l&&(g.captured=l),u&&(g.promotion=u,g.lan+=u),g}turn(){return this._turn}board(){let e=[],t=[];for(let r=o.a8;r<=o.h1;r++)null==this._board[r]?t.push(null):t.push({square:b(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in o){let t=o[e];return((t>>4)+(15&t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){let t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){let i=t.pop();if(!i)break;e?r.push(this._makePretty(i)):r.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return r}_pruneComments(){let e=[],t={},r=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){let t=e.pop();if(!t)break;this._makeMove(t),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){let e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{let t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(let r of["k","q"])void 0!==t[r]&&(t[r]?this._castling[e]|=g[r]:this._castling[e]&=~g[r]);this._updateCastlingRights();let r=this.getCastlingRights(e);return(void 0===t.k||t.k===r.k)&&(void 0===t.q||t.q===r.q)}getCastlingRights(e){return{k:(this._castling[e]&g.k)!=0,q:(this._castling[e]&g.q)!=0}}moveNumber(){return this._moveNumber}}},79636:(e,t,r)=>{let i;r.d(t,{r:()=>tg});var n,s,o=r(53854),a=r(34218);let l=(0,a.createContext)({dragDropManager:void 0});function u(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var c="function"==typeof Symbol&&Symbol.observable||"@@observable",d=function(){return Math.random().toString(36).substring(7).split("").join(".")},h={INIT:"@@redux/INIT"+d(),REPLACE:"@@redux/REPLACE"+d(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+d()}};function g(e,t,...r){if("undefined"!=typeof process&&void 0===t)throw Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;(e=Error(t.replace(/%s/g,function(){return r[i++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}function f(e){return"object"==typeof e}let p="dnd-core/INIT_COORDS",v="dnd-core/BEGIN_DRAG",m="dnd-core/PUBLISH_DRAG_SOURCE",b="dnd-core/HOVER",y="dnd-core/DROP",S="dnd-core/END_DRAG";function O(e,t){return{type:p,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}let w={type:p,payload:{clientOffset:null,sourceClientOffset:null}};function C(e,t){return null===t?null===e:Array.isArray(e)?e.some(e=>e===t):e===t}class D{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){var e,t,r,i,n;let s=this,{dispatch:o}=this.store,a={beginDrag:(e=this,function(t=[],r={publishSource:!0}){let{publishSource:i=!0,clientOffset:n,getSourceClientOffset:s}=r,o=e.getMonitor(),a=e.getRegistry();e.dispatch(O(n)),g(!o.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(e){g(a.getSource(e),"Expected sourceIds to be registered.")});let l=function(e,t){let r=null;for(let i=e.length-1;i>=0;i--)if(t.canDragSource(e[i])){r=e[i];break}return r}(t,o);if(null==l)return void e.dispatch(w);let u=null;if(n){if(!s)throw Error("getSourceClientOffset must be defined");g("function"==typeof s,"When clientOffset is provided, getSourceClientOffset must be a function."),u=s(l)}e.dispatch(O(n,u));let c=a.getSource(l).beginDrag(o,l);if(null==c)return;g(f(c),"Item must be an object."),a.pinSource(l);let d=a.getSourceType(l);return{type:v,payload:{itemType:d,item:c,sourceId:l,clientOffset:n||null,sourceClientOffset:u||null,isSourcePublic:!!i}}}),publishDragSource:(t=this,function(){if(t.getMonitor().isDragging())return{type:m}}),hover:(r=this,function(e,{clientOffset:t}={}){g(Array.isArray(e),"Expected targetIds to be an array.");let i=e.slice(0),n=r.getMonitor(),s=r.getRegistry();return function(e,t,r){for(let i=e.length-1;i>=0;i--){let n=e[i];C(t.getTargetType(n),r)||e.splice(i,1)}}(i,s,n.getItemType()),function(e,t,r){g(t.isDragging(),"Cannot call hover while not dragging."),g(!t.didDrop(),"Cannot call hover after drop.");for(let t=0;t<e.length;t++){let i=e[t];g(e.lastIndexOf(i)===t,"Expected targetIds to be unique in the passed array."),g(r.getTarget(i),"Expected targetIds to be registered.")}}(i,n,s),function(e,t,r){e.forEach(function(e){r.getTarget(e).hover(t,e)})}(i,n,s),{type:b,payload:{targetIds:i,clientOffset:t||null}}}),drop:(i=this,function(e={}){let t=i.getMonitor(),r=i.getRegistry();g(t.isDragging(),"Cannot call drop while not dragging."),g(!t.didDrop(),"Cannot call drop twice during one drag operation.");let n=function(e){let t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(t);n.forEach((n,s)=>{let o=function(e,t,r,i){var n;let s=r.getTarget(e),o=s?s.drop(i,e):void 0;return g(void 0===(n=o)||f(n),"Drop result must either be an object or undefined."),void 0===o&&(o=0===t?{}:i.getDropResult()),o}(n,s,r,t),a={type:y,payload:{dropResult:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){var i;i=r[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})}return e}({},e,o)}};i.dispatch(a)})}),endDrag:(n=this,function(){let e=n.getMonitor(),t=n.getRegistry();g(e.isDragging(),"Cannot call endDrag while not dragging.");let r=e.getSourceId();return null!=r&&(t.getSource(r,!0).endDrag(e,r),t.unpinSource()),{type:S}})};return Object.keys(a).reduce((e,t)=>{let r=a[t];return e[t]=(...e)=>{let t=r.apply(s,e);void 0!==t&&o(t)},e},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{let e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function E(e,t){return{x:e.x-t.x,y:e.y-t.y}}let _=[],T=[];_.__IS_NONE__=!0,T.__IS_ALL__=!0;class k{subscribeToStateChange(e,t={}){let{handlerIds:r}=t;g("function"==typeof e,"listener must be a function."),g(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;return this.store.subscribe(()=>{let t=this.store.getState(),n=t.stateId;try{var s;let o=n===i||n===i+1&&((s=t.dirtyHandlerIds)===_||s!==T&&void 0!==r&&!(r.filter(e=>s.indexOf(e)>-1).length>0));o||e()}finally{i=n}})}subscribeToOffsetChange(e){g("function"==typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe(()=>{let r=this.store.getState().dragOffset;r!==t&&(t=r,e())})}canDragSource(e){if(!e)return!1;let t=this.registry.getSource(e);return g(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;let t=this.registry.getTarget(e);return g(t,`Expected to find a valid target. targetId=${e}`),!(!this.isDragging()||this.didDrop())&&C(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;let t=this.registry.getSource(e,!0);return g(t,`Expected to find a valid source. sourceId=${e}`),!!(this.isDragging()&&this.isSourcePublic())&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;let{shallow:r}=t;if(!this.isDragging())return!1;let i=this.registry.getTargetType(e),n=this.getItemType();if(n&&!C(i,n))return!1;let s=this.getTargetIds();if(!s.length)return!1;let o=s.indexOf(e);return r?o===s.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){let{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:i}=e;return t&&r&&i?E({x:t.x+i.x,y:t.y+i.y},r):null}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){let{clientOffset:t,initialClientOffset:r}=e;return t&&r?E(t,r):null}(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}let x="undefined"!=typeof global?global:self,j=x.MutationObserver||x.WebKitMutationObserver;function I(e){return function(){let t=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(t),clearInterval(r),e()}}}let L="function"==typeof j?function(e){let t=1,r=new j(e),i=document.createTextNode("");return r.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}:I;class P{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}let M=new class{enqueueTask(e){let{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:e}=this;for(;this.index<e.length;){let t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,r=e.length-this.index;t<r;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=L(this.flush),this.requestErrorThrow=I(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},N=new class{create(e){let t=this.freeTasks,r=t.length?t.pop():new P(this.onError,e=>t[t.length]=e);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}(M.registerPendingError),R="dnd-core/ADD_SOURCE",A="dnd-core/ADD_TARGET",q="dnd-core/REMOVE_SOURCE",B="dnd-core/REMOVE_TARGET";function H(e,t){t&&Array.isArray(e)?e.forEach(e=>H(e,!1)):g("string"==typeof e||"symbol"==typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(n||(n={}));let U=0;function z(e){switch(e[0]){case"S":return n.SOURCE;case"T":return n.TARGET;default:throw Error(`Cannot parse handler ID: ${e}`)}}function F(e,t){let r=e.entries(),i=!1;do{let{done:e,value:[,n]}=r.next();if(n===t)return!0;i=!!e}while(!i);return!1}class W{addSource(e,t){H(e),g("function"==typeof t.canDrag,"Expected canDrag to be a function."),g("function"==typeof t.beginDrag,"Expected beginDrag to be a function."),g("function"==typeof t.endDrag,"Expected endDrag to be a function.");let r=this.addHandler(n.SOURCE,e,t);return this.store.dispatch({type:R,payload:{sourceId:r}}),r}addTarget(e,t){H(e,!0),g("function"==typeof t.canDrop,"Expected canDrop to be a function."),g("function"==typeof t.hover,"Expected hover to be a function."),g("function"==typeof t.drop,"Expected beginDrag to be a function.");let r=this.addHandler(n.TARGET,e,t);return this.store.dispatch({type:A,payload:{targetId:r}}),r}containsHandler(e){return F(this.dragSources,e)||F(this.dropTargets,e)}getSource(e,t=!1){return g(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return g(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return g(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return g(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return z(e)===n.SOURCE}isTargetId(e){return z(e)===n.TARGET}removeSource(e){g(this.getSource(e),"Expected an existing source."),this.store.dispatch({type:q,payload:{sourceId:e}}),M.enqueueTask(N.create(()=>{this.dragSources.delete(e),this.types.delete(e)}))}removeTarget(e){g(this.getTarget(e),"Expected an existing target."),this.store.dispatch({type:B,payload:{targetId:e}}),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){let t=this.getSource(e);g(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){g(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){let i=function(e){let t=(U++).toString();switch(e){case n.SOURCE:return`S${t}`;case n.TARGET:return`T${t}`;default:throw Error(`Unknown Handler Role: ${e}`)}}(e);return this.types.set(i,t),e===n.SOURCE?this.dragSources.set(i,r):e===n.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}let $=(e,t)=>e===t,K={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){var i;i=r[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})}return e}let G={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function X(e={},t){var r;return{dirtyHandlerIds:function(e=_,t){switch(t.type){case b:break;case R:case A:case B:case q:return _;default:return T}let{targetIds:r=[],prevTargetIds:i=[]}=t.payload,n=function(e,t){let r=new Map,i=e=>{r.set(e,r.has(e)?r.get(e)+1:1)};e.forEach(i),t.forEach(i);let n=[];return r.forEach((e,t)=>{1===e&&n.push(t)}),n}(r,i);if(!(n.length>0||!function(e,t,r=$){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!r(e[i],t[i]))return!1;return!0}(r,i)))return _;let s=i[i.length-1],o=r[r.length-1];return s!==o&&(s&&n.push(s),o&&n.push(o)),n}(e.dirtyHandlerIds,{type:t.type,payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){var i;i=r[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})}return e}({},t.payload,{prevTargetIds:(r=[],"dragOperation.targetIds".split(".").reduce((e,t)=>e&&e[t]?e[t]:r||null,e))})}),dragOffset:function(e=K,t){var r,i;let{payload:n}=t;switch(t.type){case p:case v:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case b:return r=e.clientOffset,i=n.clientOffset,!r&&!i||r&&i&&r.x===i.x&&r.y===i.y?e:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){var i;i=r[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})}return e}({},e,{clientOffset:n.clientOffset});case S:case y:return K;default:return e}}(e.dragOffset,t),refCount:function(e=0,t){switch(t.type){case R:case A:return e+1;case q:case B:return e-1;default:return e}}(e.refCount,t),dragOperation:function(e=G,t){var r,i;let{payload:n}=t;switch(t.type){case v:return Q({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case m:return Q({},e,{isSourcePublic:!0});case b:return Q({},e,{targetIds:n.targetIds});case B:return -1===e.targetIds.indexOf(n.targetId)?e:Q({},e,{targetIds:(r=e.targetIds,i=n.targetId,r.filter(e=>e!==i))});case y:return Q({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case S:return Q({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}(e.dragOperation,t),stateId:function(e=0){return e+1}(e.stateId)}}let Y=0,V=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var J=(0,a.memo)(function(e){var{children:t}=e,r=function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,["children"]);let[i,n]=function(e){if("manager"in e)return[{dragDropManager:e.manager},!1];let t=function(e,t=Z(),r,i){return t[V]||(t[V]={dragDropManager:function(e,t,r={},i=!1){let n=function e(t,r,i){if("function"==typeof r&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw Error(u(0));if("function"==typeof r&&void 0===i&&(i=r,r=void 0),void 0!==i){if("function"!=typeof i)throw Error(u(1));return i(e)(t,r)}if("function"!=typeof t)throw Error(u(2));var n,s=t,o=r,a=[],l=a,d=!1;function g(){l===a&&(l=a.slice())}function f(){if(d)throw Error(u(3));return o}function p(e){if("function"!=typeof e)throw Error(u(4));if(d)throw Error(u(5));var t=!0;return g(),l.push(e),function(){if(t){if(d)throw Error(u(6));t=!1,g();var r=l.indexOf(e);l.splice(r,1),a=null}}}function v(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error(u(7));if(void 0===e.type)throw Error(u(8));if(d)throw Error(u(9));try{d=!0,o=s(o,e)}finally{d=!1}for(var t=a=l,r=0;r<t.length;r++)(0,t[r])();return e}return v({type:h.INIT}),(n={dispatch:v,subscribe:p,getState:f,replaceReducer:function(e){if("function"!=typeof e)throw Error(u(10));s=e,v({type:h.REPLACE})}})[c]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw Error(u(11));function t(){e.next&&e.next(f())}return t(),{unsubscribe:p(t)}}})[c]=function(){return this},e},n}(X,i&&!1),s=new k(n,new W(n)),o=new D(n,s),a=e(o,t,r);return o.receiveBackend(a),o}(e,t,r,i)}),t[V]}(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}(r);return(0,a.useEffect)(()=>{if(n){let e=Z();return++Y,()=>{0==--Y&&(e[V]=null)}}},[]),(0,o.jsx)(l.Provider,{value:i,children:t})});function Z(){return"undefined"!=typeof global?global:window}var ee=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(n=i;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=i;0!=n--;){var i,n,s,o=s[n];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r};let et=a.useEffect;function er(e,t,r){let[i,n]=(0,a.useState)(()=>t(e)),s=(0,a.useCallback)(()=>{let s=t(e);ee(i,s)||(n(s),r&&r())},[i,e,r]);return et(s),[i,s]}function ei(e,t,r){return function(e,t,r){let[i,n]=er(e,t,r);return et(function(){let t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(n,{handlerIds:[t]})},[e,n]),i}(t,e||(()=>({})),()=>r.reconnect())}function en(e,t){let r=[...t||[]];return null==t&&"function"!=typeof e&&r.push(e),(0,a.useMemo)(()=>"function"==typeof e?e():e,r)}let es=!1,eo=!1;class ea{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){g(!es,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return es=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{es=!1}}isDragging(){if(!this.sourceId)return!1;g(!eo,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return eo=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{eo=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let el=!1;class eu{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;g(!el,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return el=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{el=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function ec(e,t,r,i){let n=r?r.call(i,e,t):void 0;if(void 0!==n)return!!n;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;let s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;let a=Object.prototype.hasOwnProperty.bind(t);for(let o=0;o<s.length;o++){let l=s[o];if(!a(l))return!1;let u=e[l],c=t[l];if(!1===(n=r?r.call(i,u,c,l):void 0)||void 0===n&&u!==c)return!1}return!0}function ed(e){return null!==e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function eh(e){let t={};return Object.keys(e).forEach(r=>{let i=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{let e=(e=null,t=null)=>(0,a.isValidElement)(e)?(function(e){if("string"==typeof e.type)return;let t=e.type.displayName||e.type.name||"the component";throw Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}(e),function(e,t){let r=e.ref;return g("string"!=typeof r,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),(0,a.cloneElement)(e,r?{ref:e=>{eg(r,e),eg(t,e)}}:{ref:t})}(e,t?e=>i(e,t):i)):(i(e,t),e);t[r]=()=>e}}),t}function eg(e,t){"function"==typeof e?e(t):e.current=t}class ef{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){let e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){let e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e),t}reconnectDragPreview(e=!1){let t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();r&&this.disconnectDragPreview(),this.handlerId&&(t?r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)):this.lastConnectedDragPreview=t)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ec(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ec(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=eh({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,ed(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,ed(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class ep{get connectTarget(){return this.dropTarget}reconnect(){let e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();let t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ec(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=eh({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,ed(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function ev(){let{dragDropManager:e}=(0,a.useContext)(l);return g(null!=e,"Expected drag drop context"),e}class em{beginDrag(){let e=this.spec,t=this.monitor,r=null;return null!=(r="object"==typeof e.item?e.item:"function"==typeof e.item?e.item(t):{})?r:null}canDrag(){let e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}isDragging(e,t){let r=this.spec,i=this.monitor,{isDragging:n}=r;return n?n(i):t===e.getSourceId()}endDrag(){let e=this.spec,t=this.monitor,r=this.connector,{end:i}=e;i&&i(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}class eb{canDrop(){let e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){let e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){let e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function ey(e){let t=null;return()=>(null==t&&(t=e()),t)}class eS{enter(e){let t=this.entered.length;return this.entered=function(e,t){let r=new Set,i=e=>r.add(e);e.forEach(i),t.forEach(i);let n=[];return r.forEach(e=>n.push(e)),n}(this.entered.filter(t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e))),[e]),0===t&&this.entered.length>0}leave(e){let t=this.entered.length;return this.entered=this.entered.filter(this.isNodeInDocument).filter(t=>t!==e),t>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class eO{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null)})})}loadDataTransfer(e){if(e){let t={};Object.keys(this.config.exposeProperties).forEach(r=>{let i=this.config.exposeProperties[r];null!=i&&(t[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}let ew="__NATIVE_FILE__",eC="__NATIVE_URL__",eD="__NATIVE_TEXT__",eE="__NATIVE_HTML__";var e_=Object.freeze({__proto__:null,FILE:ew,HTML:eE,TEXT:eD,URL:eC});function eT(e,t,r){let i=t.reduce((t,r)=>t||e.getData(r),"");return null!=i?i:r}let ek={[ew]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[eE]:{exposeProperties:{html:(e,t)=>eT(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[eC]:{exposeProperties:{urls:(e,t)=>eT(e,t,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[eD]:{exposeProperties:{text:(e,t)=>eT(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function ex(e){if(!e)return null;let t=Array.prototype.slice.call(e.types||[]);return Object.keys(ek).filter(e=>{let r=ek[e];return!!(null==r?void 0:r.matchesTypes)&&r.matchesTypes.some(e=>t.indexOf(e)>-1)})[0]||null}let ej=ey(()=>/firefox/i.test(navigator.userAgent)),eI=ey(()=>!!window.safari);class eL{interpolate(e){let{xs:t,ys:r,c1s:i,c2s:n,c3s:s}=this,o=t.length-1;if(e===t[o])return r[o];let a,l=0,u=s.length-1;for(;l<=u;){a=Math.floor(.5*(l+u));let i=t[a];if(i<e)l=a+1;else{if(!(i>e))return r[a];u=a-1}}o=Math.max(0,u);let c=e-t[o],d=c*c;return r[o]+i[o]*c+n[o]*d+s[o]*c*d}constructor(e,t){let r,i,n;let{length:s}=e,o=[];for(let e=0;e<s;e++)o.push(e);o.sort((t,r)=>e[t]<e[r]?-1:1);let a=[],l=[];for(let n=0;n<s-1;n++)r=e[n+1]-e[n],i=t[n+1]-t[n],a.push(r),l.push(i/r);let u=[l[0]];for(let e=0;e<a.length-1;e++){let t=l[e],i=l[e+1];if(t*i<=0)u.push(0);else{r=a[e];let n=a[e+1],s=r+n;u.push(3*s/((s+n)/t+(s+r)/i))}}u.push(l[l.length-1]);let c=[],d=[];for(let e=0;e<u.length-1;e++){n=l[e];let t=u[e],r=1/a[e],i=t+u[e+1]-n-n;c.push((n-t-i)*r),d.push(i*r*r)}this.xs=e,this.ys=t,this.c1s=u,this.c2s=c,this.c3s=d}}function eP(e){let t=1===e.nodeType?e:e.parentElement;if(!t)return null;let{top:r,left:i}=t.getBoundingClientRect();return{x:i,y:r}}function eM(e){return{x:e.clientX,y:e.clientY}}function eN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){var i;i=r[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})}return e}class eR{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){var e;let t=this.rootElement;void 0!==t&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(e=this.window)||void 0===e||e.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);let i=t=>this.handleDragStart(t,e),n=e=>this.handleSelectStart(e);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",n),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",n),t.setAttribute("draggable","false")}}connectDropTarget(e,t){let r=t=>this.handleDragEnter(t,e),i=t=>this.handleDragOver(t,e),n=t=>this.handleDrop(t,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",n),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",n)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return eN({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let e=this.monitor.getSourceId();return eN({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){let e=this.monitor.getItemType();return Object.keys(e_).some(t=>e_[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){let r=ek[e];if(!r)throw Error(`native type ${e} has no configuration`);let i=new eO(r);return i.loadDataTransfer(t),i}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout(()=>{var e;return null===(e=this.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;return this.currentDragSourceNode=null,this.rootElement&&(null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{let t=this.sourceNodes.get(e);return t&&eP(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>!!(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{let e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!=typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!=typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;let{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;let r=eM(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:r});let{dataTransfer:i}=e,n=ex(i);if(this.monitor.isDragging()){if(i&&"function"==typeof i.setDragImage){let e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),n=this.sourcePreviewNodes.get(e)||t;if(n){let{anchorX:e,anchorY:s,offsetX:o,offsetY:a}=this.getCurrentSourcePreviewNodeOptions(),l=function(e,t,r,i,n){var s;let o,a,l;let u="IMG"===t.nodeName&&(ej()||!(null===(s=document.documentElement)||void 0===s?void 0:s.contains(t))),c=eP(u?e:t),d={x:r.x-c.x,y:r.y-c.y},{offsetWidth:h,offsetHeight:g}=e,{anchorX:f,anchorY:p}=i,{dragPreviewWidth:v,dragPreviewHeight:m}=(o=u?t.width:h,a=u?t.height:g,eI()&&u&&(a/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:a}),{offsetX:b,offsetY:y}=n;return{x:0===b||b?b:new eL([0,.5,1],[d.x,d.x/h*v,d.x+v-h]).interpolate(f),y:0===y||y?y:(l=new eL([0,.5,1],[d.y,d.y/g*m,d.y+m-g]).interpolate(p),eI()&&u&&(l+=(window.devicePixelRatio-1)*m),l)}}(t,n,r,{anchorX:e,anchorY:s},{offsetX:o,offsetY:a});i.setDragImage(n,l.x,l.y)}}try{null==i||i.setData("application/json",{})}catch(e){}this.setCurrentDragSourceNode(e.target);let{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(n)this.beginDragNativeItem(n);else{if(i&&!i.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{var t;if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)),!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;let{dataTransfer:r}=e,i=ex(r);i&&this.beginDragNativeItem(i,r)},this.handleTopDragEnter=e=>{let{dragEnterTargetIds:t}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:eM(e)}),t.some(e=>this.monitor.canDropOnTarget(e))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=e=>{var t;this.dragOverTargetIds=[],this.isDraggingNativeItem()&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer))},this.handleTopDragOver=e=>{let{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));this.altKeyPressed=e.altKey,this.lastClientOffset=eM(e),this.scheduleHover(t),(t||[]).some(e=>this.monitor.canDropOnTarget(e))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault(),this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=e=>{var t;(this.dropTargetIds=[],this.isDraggingNativeItem())?(e.preventDefault(),null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):ex(e.dataTransfer)&&e.preventDefault(),this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{let{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:eM(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{let t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new class{get window(){return this.globalContext?this.globalContext:void 0}get document(){var e;return(null===(e=this.globalContext)||void 0===e?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new eS(this.isNodeInDocument)}}let eA=function(e,t,r){return new eR(e,t,r)};!function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"}(s||(s={}));class eq{get delay(){var e;return null!==(e=this.args.delay)&&void 0!==e?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return null!==(e=this.args.ignoreContextMenu)&&void 0!==e&&e}get enableHoverOutsideTarget(){var e;return null!==(e=this.args.enableHoverOutsideTarget)&&void 0!==e&&e}get enableKeyboardEvents(){var e;return null!==(e=this.args.enableKeyboardEvents)&&void 0!==e&&e}get enableMouseEvents(){var e;return null!==(e=this.args.enableMouseEvents)&&void 0!==e&&e}get enableTouchEvents(){var e;return null===(e=this.args.enableTouchEvents)||void 0===e||e}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,r,i;return null!==(i=null!==(r=null===(e=this.args)||void 0===e?void 0:e.delayTouchStart)&&void 0!==r?r:null===(t=this.args)||void 0===t?void 0:t.delay)&&void 0!==i?i:0}get delayMouseStart(){var e,t,r,i;return null!==(i=null!==(r=null===(e=this.args)||void 0===e?void 0:e.delayMouseStart)&&void 0!==r?r:null===(t=this.args)||void 0===t?void 0:t.delay)&&void 0!==i?i:0}get window(){return this.context&&this.context.window?this.context.window:void 0}get document(){var e;return(null===(e=this.context)||void 0===e?void 0:e.document)?this.context.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.args)||void 0===e?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}function eB(e){return void 0===e.button||0===e.button}function eH(e){return!!e.targetTouches}function eU(e,t){return eH(e)?1===e.targetTouches.length?eU(e.targetTouches[0]):t&&1===e.touches.length&&e.touches[0].target===t.target?eU(e.touches[0]):void 0:{x:e.clientX,y:e.clientY}}let ez=(()=>{let e=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get:()=>(e=!0,!0)}))}catch(e){}return e})(),eF={[s.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[s.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[s.keyboard]:{keydown:"keydown"}};class eW{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:(null===(e=this.dragOverTargetIds)||void 0===e?void 0:e.length)||0}}get document(){return this.options.document}setup(){let e=this.options.rootElement;e&&(g(!eW.isSetUp,"Cannot have two Touch backends at the same time."),eW.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){let e=this.options.rootElement;e&&(eW.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,r,i=!1){let n=ez?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(i){let s=eF[i][t];s&&e.addEventListener(s,r,n)})}removeEventListener(e,t,r,i=!1){let n=ez?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(i){let s=eF[i][t];s&&e.removeEventListener(s,r,n)})}connectDragSource(e,t){let r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",r)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){let r=this.options.rootElement;if(!this.document||!r)return()=>{};let i=i=>{let n;if(!this.document||!r||!this.monitor.isDragging())return;switch(i.type){case eF.mouse.move:n={x:i.clientX,y:i.clientY};break;case eF.touch.move:var s,o;n={x:(null===(s=i.touches[0])||void 0===s?void 0:s.clientX)||0,y:(null===(o=i.touches[0])||void 0===o?void 0:o.clientY)||0}}let a=null!=n?this.document.elementFromPoint(n.x,n.y):void 0,l=a&&t.contains(a);return a===t||l?this.handleMove(i,e):void 0};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return this.options.delayTouchStart||this.options.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,r){this.getSourceClientOffset=e=>{let t=this.sourceNodes.get(e);return t&&function(e){let t=1===e.nodeType?e:e.parentElement;if(!t)return;let{top:r,left:i}=t.getBoundingClientRect();return{x:i,y:r}}(t)},this.handleTopMoveStartCapture=e=>{eB(e)&&(this.moveStartSourceIds=[])},this.handleMoveStart=e=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(e)},this.handleTopMoveStart=e=>{if(!eB(e))return;let t=eU(e);t&&(eH(e)&&(this.lastTargetTouchFallback=e.targetTouches[0]),this._mouseClientOffset=t),this.waitingForDelay=!1},this.handleTopMoveStartDelay=e=>{if(!eB(e))return;let t=e.type===eF.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e),t),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(e,t)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(t)},this.handleTopMove=e=>{var t,r;if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds:i,dragOverTargetIds:n}=this,s=this.options.enableHoverOutsideTarget,o=eU(e,this.lastTargetTouchFallback);if(!o)return;if(this._isScrolling||!this.monitor.isDragging()&&function(e,t,r,i,n){if(!n)return!1;let s=180*Math.atan2(i-t,r-e)/Math.PI+180;for(let e=0;e<n.length;++e){let t=n[e];if(t&&(null==t.start||s>=t.start)&&(null==t.end||s<=t.end))return!0}return!1}(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,o.x,o.y,this.options.scrollAngleRanges))return void(this._isScrolling=!0);if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&(t=this._mouseClientOffset.x||0,r=this._mouseClientOffset.y||0,Math.sqrt(Math.pow(Math.abs(o.x-t),2)+Math.pow(Math.abs(o.y-r),2))>(this.options.touchSlop?this.options.touchSlop:0))&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let a=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(a),this.actions.publishDragSource(),e.cancelable&&e.preventDefault();let l=(n||[]).map(e=>this.targetNodes.get(e)).filter(e=>!!e),u=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(o.x,o.y,l):this.document.elementsFromPoint(o.x,o.y),c=[];for(let e in u){if(!u.hasOwnProperty(e))continue;let t=u[e];for(null!=t&&c.push(t);t;)(t=t.parentElement)&&-1===c.indexOf(t)&&c.push(t)}let d=c.filter(e=>l.indexOf(e)>-1).map(e=>this._getDropTargetId(e)).filter(e=>!!e).filter((e,t,r)=>r.indexOf(e)===t);if(s)for(let e in this.targetNodes){let t=this.targetNodes.get(e);if(a&&t&&t.contains(a)&&-1===d.indexOf(e)){d.unshift(e);break}}d.reverse(),this.actions.hover(d,{clientOffset:o})},this._getDropTargetId=e=>{let t=this.targetNodes.keys(),r=t.next();for(;!1===r.done;){let i=r.value;if(e===this.targetNodes.get(i))return i;r=t.next()}},this.handleTopMoveEndCapture=e=>{this._isScrolling=!1,this.lastTargetTouchFallback=void 0,function(e){return void 0===e.buttons||0==(1&e.buttons)}(e)&&(this.monitor.isDragging()&&!this.monitor.didDrop()?(e.cancelable&&e.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()):this.moveStartSourceIds=void 0)},this.handleCancelOnEscape=e=>{"Escape"===e.key&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new eq(r,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(s.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(s.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(s.keyboard)}}let e$=function(e,t={},r={}){return new eW(e,t,r)},eK="abcdefgh".split(""),eQ={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},eG={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},eX={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},eY=[7,6,5,4,3,2,1,0],eV=[0,1,2,3,4,5,6,7],eJ={wP:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsx)("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),(0,o.jsx)("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),(0,o.jsx)("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsxs)("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[(0,o.jsx)("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),(0,o.jsx)("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),(0,o.jsx)("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),(0,o.jsx)("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[(0,o.jsx)("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),(0,o.jsx)("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),(0,o.jsx)("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),(0,o.jsx)("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),(0,o.jsx)("circle",{cx:"6",cy:"12",r:"2"}),(0,o.jsx)("circle",{cx:"14",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"22.5",cy:"8",r:"2"}),(0,o.jsx)("circle",{cx:"31",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsx)("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),(0,o.jsx)("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),(0,o.jsx)("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsxs)("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[(0,o.jsx)("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),(0,o.jsx)("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),(0,o.jsx)("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),(0,o.jsx)("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[(0,o.jsx)("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),(0,o.jsx)("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),(0,o.jsx)("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),(0,o.jsx)("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),(0,o.jsx)("circle",{cx:"6",cy:"12",r:"2"}),(0,o.jsx)("circle",{cx:"14",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"22.5",cy:"8",r:"2"}),(0,o.jsx)("circle",{cx:"31",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"39",cy:"12",r:"2"}),(0,o.jsx)("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),(0,o.jsxs)("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[(0,o.jsx)("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),(0,o.jsx)("path",{d:"M 12.5,31.5 L 32.5,31.5"}),(0,o.jsx)("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),(0,o.jsx)("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),(0,o.jsx)("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),(0,o.jsx)("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function eZ(e,t,r){let i=t/8;return{x:("white"===e?eG:eX)[r[0]]*i+i/2,y:("white"===e?eY:eV)[parseInt(r[1],10)-1]*i+i/2}}function e0(e){let t=!1;return Object.keys(eQ).forEach(r=>{e[r]!==eQ[r]&&(t=!0)}),Object.keys(e).forEach(r=>{eQ[r]!==e[r]&&(t=!0)}),t}function e1(e){return"start"===e?eQ:"string"==typeof e?function(e){if(!function(e){e=(e=e.replace(/ .+$/,"")).replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11");let t=e.split("/");if(8!==t.length)return!1;for(let e=0;e<8;e++)if(8!==t[e].length||-1!==t[e].search(/[^kqrnbpKQRNBP1]/))return!1;return!0}(e))return{};let t=(e=e.replace(/ .+$/,"")).split("/"),r={},i=8;for(let e=0;e<8;e++){let s=t[e].split(""),o=0;for(let e=0;e<s.length;e++){var n;-1!==s[e].search(/[1-8]/)?o+=parseInt(s[e],10):(r[eK[o]+i]=(n=s[e]).toLowerCase()===n?"b"+n.toUpperCase():"w"+n.toUpperCase(),o+=1)}i-=1}return r}(e):e}let e5=(0,a.createContext)({}),e2=()=>(0,a.useContext)(e5),e3=(0,a.forwardRef)(({allowDragOutsideBoard:e=!0,animationDuration:t=300,areArrowsAllowed:r=!0,arePiecesDraggable:i=!0,arePremovesAllowed:n=!1,autoPromoteToQueen:s=!1,boardOrientation:l="white",boardWidth:u,children:c,clearPremovesOnRightClick:d=!0,customArrows:h,customArrowColor:g="rgb(255,170,0)",customBoardStyle:f,customDarkSquareStyle:p={backgroundColor:"#B58863"},customDropSquareStyle:v={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:m={backgroundColor:"#F0D9B5"},customPieces:b,customPremoveDarkSquareStyle:y={backgroundColor:"#A42323"},customPremoveLightSquareStyle:S={backgroundColor:"#BD2828"},customSquare:O="div",customSquareStyles:w,dropOffBoardAction:C="snapback",id:D=0,isDraggablePiece:E=()=>!0,getPositionObject:_=()=>{},onArrowsChange:T=()=>{},onDragOverSquare:k=()=>{},onMouseOutSquare:x=()=>{},onMouseOverSquare:j=()=>{},onPieceClick:I=()=>{},onPieceDragBegin:L=()=>{},onPieceDragEnd:P=()=>{},onPieceDrop:M=()=>!0,onPromotionCheck:N=(e,t,r)=>("wP"===r&&"7"===e[1]&&"8"===t[1]||"bP"===r&&"2"===e[1]&&"1"===t[1])&&1>=Math.abs(e.charCodeAt(0)-t.charCodeAt(0)),onPromotionPieceSelect:R,onSquareClick:A=()=>{},onSquareRightClick:q=()=>{},position:B="start",promotionDialogVariant:H="default",promotionToSquare:U=null,showBoardNotation:z=!0,showPromotionDialog:F=!1,snapToCursor:W=!0},$)=>{let[K,Q]=(0,a.useState)(e1(B)),[G,X]=(0,a.useState)({removed:{},added:{}}),[Y,V]=(0,a.useState)(void 0),[J,Z]=(0,a.useState)(F&&!s),[ee,et]=(0,a.useState)(null),[er,ei]=(0,a.useState)(U),[en,es]=(0,a.useState)([]),eo=(0,a.useRef)(en),[ea,el]=(0,a.useState)(),[eu,ec]=(0,a.useState)(Object.assign(Object.assign({},eJ),b)),[ed,eh]=(0,a.useState)(!1),[eg,ef]=(0,a.useState)(),[ep,ev]=(0,a.useState)(!1);(0,a.useImperativeHandle)($,()=>({clearPremoves(e=!0){eC(e)}})),(0,a.useEffect)(()=>{ec(Object.assign(Object.assign({},eJ),b))},[b]),(0,a.useEffect)(()=>{Z(F),ei(U)},[U,F]),(0,a.useEffect)(()=>{var e,r,i;eD();let s=e1(B),o=function(e,t){let r={removed:{},added:{}};return Object.keys(e).forEach(i=>{t[i]!==e[i]&&(r.removed[i]=e[i])}),Object.keys(t).forEach(i=>{e[i]!==t[i]&&(r.added[i]=t[i])}),r}(K,s),a=(null===(e=Object.keys(o.added))||void 0===e?void 0:e.length)<=2?null===(i=null===(r=Object.entries(o.added))||void 0===r?void 0:r[0])||void 0===i?void 0:i[1][0]:void 0;if(ep)Q(s),ev(!1),n&&ew(a),eg&&clearTimeout(eg);else if(ed)Q(s),ev(!1),n&&ew(a);else{e0(s)&&void 0!==Y?V(a):e0(s)?V(void 0):V("b"),X(o),ev(!0);let e=setTimeout(()=>{Q(s),ev(!1),n&&ew(a)},t);ef(e)}return eh(!1),_(s),ey(),()=>{clearTimeout(eg)}},[B]);let{arrows:em,newArrow:eb,clearArrows:ey,drawNewArrow:eS,onArrowDrawEnd:eO}=((e,t=!0,r,i)=>{let[n,s]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[u,c]=(0,a.useState)();(0,a.useEffect)(()=>{Array.isArray(e)&&s(null==e?void 0:e.filter(e=>e[0]!==e[1]))},[e]),(0,a.useEffect)(()=>{null==r||r(o)},[o]);let d=[...o,...n];return{arrows:d,newArrow:u,clearArrows:function(){l([]),c(void 0)},drawNewArrow:(e,r)=>{t&&c([e,r,i])},setArrows:l,onArrowDrawEnd:(e,r)=>{let n;e!==r&&t&&(n=d.every(([t,i])=>!(t===e&&i===r))?[...o,[e,r,i]]:o.filter(([t,i])=>!(t===e&&i===r)),c(void 0),l(n))}}})(h,r,T,g);function ew(e){if(0===eo.current.length)return;let t=eo.current[0];if(void 0!==t.piece[0]&&t.piece[0]!==e&&M.length){if(V(t.piece[0]),eh(!0),M(t.sourceSq,t.targetSq,t.piece)){let e=[...eo.current];e.shift(),eo.current=e,es([...e])}else eC()}}function eC(e=!0){e&&V(void 0),eo.current=[],es([])}function eD(){et(null),ei(null),Z(!1)}return(0,o.jsx)(e5.Provider,Object.assign({value:{animationDuration:t,arePiecesDraggable:i,arePremovesAllowed:n,boardOrientation:l,boardWidth:u,customArrowColor:g,customBoardStyle:f,customDarkSquareStyle:p,customDropSquareStyle:v,customLightSquareStyle:m,customPremoveDarkSquareStyle:y,customPremoveLightSquareStyle:S,customSquare:O,customSquareStyles:w,id:D,isDraggablePiece:E,onDragOverSquare:k,onMouseOutSquare:x,onMouseOverSquare:j,onPieceClick:I,onPieceDragBegin:L,onPieceDragEnd:P,onPieceDrop:M,onPromotionCheck:N,onPromotionPieceSelect:R,onSquareClick:A,showBoardNotation:z,snapToCursor:W,promotionDialogVariant:H,allowDragOutsideBoard:e,arrows:em,newArrow:eb,onArrowDrawEnd:eO,chessPieces:eu,clearArrows:ey,drawNewArrow:eS,clearCurrentRightClickDown:function(){el(void 0)},currentPosition:K,handleSetPosition:function(e,t,r,i){if(e===t)return;if(ey(),n&&ep||n&&(Y===r[0]||eo.current.filter(e=>e.piece[0]===r[0]).length>0)){let i=[...eo.current];return i.push({sourceSq:e,targetSq:t,piece:r}),eo.current=i,es([...i]),void eD()}if(!n&&ep)return;let s=Object.assign({},K);(eh(!!i),V(r[0]),M.length)?M(e,t,r)||(eC(),eh(!1)):("trash"!==C||t||delete s[e],delete s[e],s[t]=r,Q(s)),eD(),_(s)},isWaitingForAnimation:ep,lastPieceColour:Y,onRightClickDown:function(e){el(e)},onRightClickUp:function(e){if(ea){if(ea===e)return el(void 0),d&&eC(!1),void q(e)}else el(void 0)},positionDifferences:G,promoteFromSquare:ee,promoteToSquare:er,premoves:en,setPromoteFromSquare:et,setPromoteToSquare:ei,setShowPromoteDialog:Z,showPromoteDialog:J,autoPromoteToQueen:s,currentRightClickDown:ea}},{children:c}))});function e4({row:e,col:t}){let{boardOrientation:r,boardWidth:i,customDarkSquareStyle:n,customLightSquareStyle:s}=e2(),a=s.backgroundColor,l=n.backgroundColor,u=0===t,c=7===e;function d(){return"white"===r?8-e:e+1}function h(){return"black"===r?eK[7-t]:eK[t]}return u&&c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),e8(i))},{children:d()})),(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),e6(i))},{children:h()}))]}):c?(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:t%2!=0?l:a}),e6(i))},{children:h()})):u?(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2==0?l:a}),e8(i))},{children:d()})):null}let e6=e=>({alignSelf:"flex-end",paddingLeft:e/8-e/48,fontSize:e/48}),e8=e=>({alignSelf:"flex-start",paddingRight:e/8-e/48,fontSize:e/48});function e7({isPremovedPiece:e=!1,piece:t,square:r,squares:n}){let{animationDuration:s,arePiecesDraggable:l,arePremovesAllowed:u,boardWidth:c,boardOrientation:d,chessPieces:h,currentPosition:f,id:p,isDraggablePiece:v,isWaitingForAnimation:m,onPieceClick:b,onPieceDragBegin:y,onPieceDragEnd:S,positionDifferences:O,premoves:w,onPromotionCheck:C}=e2(),[D,E]=(0,a.useState)({opacity:1,zIndex:5,touchAction:"none",cursor:l&&v({piece:t,sourceSquare:r})?"-webkit-grab":"default"}),[{canDrag:_,isDragging:T},k,x]=function(e,t){let r=en(e,t);g(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");let i=function(){let e=ev();return(0,a.useMemo)(()=>new ea(e),[e])}(),n=function(e,t){let r=ev(),i=(0,a.useMemo)(()=>new ef(r.getBackend()),[r]);return et(()=>(i.dragSourceOptions=e||null,i.reconnect(),()=>i.disconnectDragSource()),[i,e]),et(()=>(i.dragPreviewOptions=t||null,i.reconnect(),()=>i.disconnectDragPreview()),[i,t]),i}(r.options,r.previewOptions);return function(e,t,r){let i=ev(),n=function(e,t,r){let i=(0,a.useMemo)(()=>new em(e,t,r),[t,r]);return(0,a.useEffect)(()=>{i.spec=e},[e]),i}(e,t,r),s=(0,a.useMemo)(()=>{let t=e.type;return g(null!=t,"spec.type must be defined"),t},[e]);et(function(){if(null!=s){let[e,o]=function(e,t,r){let i=r.getRegistry(),n=i.addSource(e,t);return[n,()=>i.removeSource(n)]}(s,n,i);return t.receiveHandlerId(e),r.receiveHandlerId(e),o}},[i,t,r,n,s])}(r,i,n),[ei(r.collect,i,n),(0,a.useMemo)(()=>n.hooks.dragSource(),[n]),(0,a.useMemo)(()=>n.hooks.dragPreview(),[n])]}(()=>({type:"piece",item:()=>(y(t,r),{piece:t,square:r,id:p}),end:()=>S(t,r),collect:e=>({canDrag:v({piece:t,sourceSquare:r}),isDragging:!!e.isDragging()})}),[t,r,f,p]);return x((i||((i=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),i),{captureDraggingState:!0}),(0,a.useEffect)(()=>{E(e=>Object.assign(Object.assign({},e),{opacity:T?0:1}))},[T]),(0,a.useEffect)(()=>{if(!u)return;let i=!1;!e&&w.find(e=>e.targetSq===r)&&(i=!0),w.find(e=>e.sourceSq===r&&e.piece===t)&&(i=!0),E(e=>Object.assign(Object.assign({},e),{display:i?"none":"unset"}))},[f,w]),(0,a.useEffect)(()=>{var t;let i=null===(t=O.removed)||void 0===t?void 0:t[r];if(!O.added||!i)return;let n=Object.entries(O.added).find(([e,t])=>t===i||C(r,e,i));if(m&&i&&n&&!e){let e=n[0];if(r&&e){let t=c/8;E(i=>Object.assign(Object.assign({},i),{transform:`translate(${("black"===d?-1:1)*(e.charCodeAt(0)-r.charCodeAt(0))*t}px, ${("black"===d?-1:1)*(Number(r[1])-Number(e[1]))*t}px)`,transition:`transform ${s}ms`,zIndex:6}))}}},[O]),(0,a.useEffect)(()=>{let{sourceSq:e}={sourceSq:n[r]};e&&E(e=>Object.assign(Object.assign({},e),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[f]),(0,a.useEffect)(()=>{E(e=>Object.assign(Object.assign({},e),{cursor:l&&v({piece:t,sourceSquare:r})?"-webkit-grab":"default"}))},[r,f,l]),(0,o.jsx)("div",Object.assign({ref:l&&_?k:null,onClick:()=>b(t),"data-piece":t,style:D},{children:"function"==typeof h[t]?h[t]({squareWidth:c/8,isDragging:T,square:r}):(0,o.jsx)("svg",Object.assign({viewBox:"1 1 43 43",width:c/8,height:c/8},{children:(0,o.jsx)("g",{children:h[t]})}))}))}function e9({square:e,squareColor:t,setSquares:r,squareHasPremove:i,children:n}){let s=(0,a.useRef)(null),{autoPromoteToQueen:l,boardWidth:u,boardOrientation:c,clearArrows:d,currentPosition:h,currentRightClickDown:f,customBoardStyle:p,customDarkSquareStyle:v,customDropSquareStyle:m,customLightSquareStyle:b,customPremoveDarkSquareStyle:y,customPremoveLightSquareStyle:S,customSquare:O,customSquareStyles:w,drawNewArrow:C,handleSetPosition:D,isWaitingForAnimation:E,lastPieceColour:_,onArrowDrawEnd:T,onDragOverSquare:k,onMouseOutSquare:x,onMouseOverSquare:j,onPieceDrop:I,onPromotionCheck:L,onRightClickDown:P,onRightClickUp:M,onSquareClick:N,setPromoteFromSquare:R,setPromoteToSquare:A,setShowPromoteDialog:q}=e2(),[{isOver:B},H]=function(e,t){let r=en(e,t),i=function(){let e=ev();return(0,a.useMemo)(()=>new eu(e),[e])}(),n=function(e){let t=ev(),r=(0,a.useMemo)(()=>new ep(t.getBackend()),[t]);return et(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}(r.options);return function(e,t,r){let i=ev(),n=function(e,t){let r=(0,a.useMemo)(()=>new eb(e,t),[t]);return(0,a.useEffect)(()=>{r.spec=e},[e]),r}(e,t),s=function(e){let{accept:t}=e;return(0,a.useMemo)(()=>(g(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}(e);et(function(){let[e,o]=function(e,t,r){let i=r.getRegistry(),n=i.addTarget(e,t);return[n,()=>i.removeTarget(n)]}(s,n,i);return t.receiveHandlerId(e),r.receiveHandlerId(e),o},[i,t,n,r,s.map(e=>e.toString()).join("|")])}(r,i,n),[ei(r.collect,i,n),(0,a.useMemo)(()=>n.hooks.dropTarget(),[n])]}(()=>({accept:"piece",drop:U,collect:e=>({isOver:!!e.isOver()})}),[e,h,I,E,_]);function U(t){L(t.square,e,t.piece)?l?D(t.square,e,"w"===t.piece[0]?"wQ":"bQ"):(R(t.square),A(e),q(!0)):D(t.square,e,t.piece,!0)}(0,a.useEffect)(()=>{if(s.current){let{x:t,y:i}=s.current.getBoundingClientRect();r(r=>Object.assign(Object.assign({},r),{[e]:{x:t,y:i}}))}},[u,c]);let z=Object.assign(Object.assign(Object.assign(Object.assign({},tr(e,c,p)),"black"===t?v:b),i&&("black"===t?y:S)),B&&m);return(0,o.jsx)("div",Object.assign({ref:H,style:z,"data-square-color":t,"data-square":e,onMouseOver:t=>{2===t.buttons&&f&&C(f,e),t.relatedTarget&&t.currentTarget.contains(t.relatedTarget)||j(e)},onMouseOut:t=>{t.relatedTarget&&t.currentTarget.contains(t.relatedTarget)||x(e)},onMouseDown:t=>{2===t.button&&P(e)},onMouseUp:t=>{2===t.button&&(f&&T(f,e),M(e))},onDragEnter:()=>k(e),onClick:()=>{N(e),d()},onContextMenu:e=>{e.preventDefault()}},{children:(0,o.jsx)(O,"string"==typeof O?Object.assign({ref:s,style:Object.assign(Object.assign(Object.assign({},tt(u)),te),!i&&(null==w?void 0:w[e]))},{children:n}):Object.assign({ref:s,square:e,squareColor:t,style:Object.assign(Object.assign(Object.assign({},tt(u)),te),!i&&(null==w?void 0:w[e]))},{children:n}))}))}let te={display:"flex",justifyContent:"center"},tt=e=>({width:e/8,height:e/8}),tr=(e,t,r)=>(null==r?void 0:r.borderRadius)?"a1"===e?"white"===t?{borderBottomLeftRadius:r.borderRadius}:{borderTopRightRadius:r.borderRadius}:"a8"===e?"white"===t?{borderTopLeftRadius:r.borderRadius}:{borderBottomRightRadius:r.borderRadius}:"h1"===e?"white"===t?{borderBottomRightRadius:r.borderRadius}:{borderTopLeftRadius:r.borderRadius}:"h8"===e?"white"===t?{borderTopRightRadius:r.borderRadius}:{borderBottomLeftRadius:r.borderRadius}:{}:{};function ti(){let[e,t]=(0,a.useState)({}),{boardOrientation:r,boardWidth:i,currentPosition:n,id:s,premoves:l,showBoardNotation:u}=e2();return(0,o.jsx)("div",Object.assign({"data-boardid":s},{children:[...Array(8)].map((s,a)=>(0,o.jsx)("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:i}},{children:[...Array(8)].map((i,s)=>{let c="black"===r?eK[7-s]+(a+1):eK[s]+(8-a),d=l.find(e=>e.sourceSq===c||e.targetSq===c),h=l.find(e=>e.targetSq===c);return(0,o.jsxs)(e9,Object.assign({square:c,squareColor:s%2==a%2?"white":"black",setSquares:t,squareHasPremove:!!d},{children:[n[c]&&(0,o.jsx)(e7,{piece:n[c],square:c,squares:e}),h&&(0,o.jsx)(e7,{isPremovedPiece:!0,piece:h.piece,square:c,squares:e}),u&&(0,o.jsx)(e4,{row:a,col:s})]}),`${s}${a}`)})}),a.toString()))}))}let tn=()=>{let{arrows:e,newArrow:t,boardOrientation:r,boardWidth:i,customArrowColor:n}=e2(),s=[...e,t].filter(Boolean);return(0,o.jsx)("svg",Object.assign({width:i,height:i,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:s.map((t,s)=>{let[l,u,c]=t;if(l===u)return null;let d=eZ(r,i,l),h=eZ(r,i,u),g=i/32,f=s===e.length;e.some(e=>e[0]!==l&&e[1]===u)&&!f&&(g=i/16);let p=h.x-d.x,v=h.y-d.y,m=Math.hypot(v,p),b={x:d.x+p*(m-g)/m,y:d.y+v*(m-g)/m};return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)("marker",Object.assign({id:`arrowhead-${s}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:(0,o.jsx)("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:null!=c?c:n})})),(0,o.jsx)("line",{x1:d.x,y1:d.y,x2:b.x,y2:b.y,opacity:f?"0.5":"0.65",stroke:null!=c?c:n,strokeWidth:f?.9*i/40:i/40,markerEnd:`url(#arrowhead-${s})`})]},`${l}-${u}${f?"-active":""}`)})}))};function ts({option:e}){let[t,r]=(0,a.useState)(!1),{boardWidth:i,chessPieces:n,customDarkSquareStyle:s,customLightSquareStyle:l,handleSetPosition:u,onPromotionPieceSelect:c,promoteFromSquare:d,promoteToSquare:h,promotionDialogVariant:g}=e2(),f=()=>{switch(e[1]){case"Q":return s.backgroundColor;case"R":return l.backgroundColor;case"N":return"default"===g?l.backgroundColor:s.backgroundColor;case"B":return"default"===g?s.backgroundColor:l.backgroundColor}};return(0,o.jsx)("div",Object.assign({onClick:()=>{(null==c?void 0:c.length)?c(e):u(d,h,e,!0)},onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),"data-piece":e,style:{cursor:"pointer",backgroundColor:t?f():`${f()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:"function"==typeof n[e]?(0,o.jsx)("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:t?"scale(1)":"scale(0.85)"}},{children:n[e]({squareWidth:i/8,isDragging:!1})})):(0,o.jsx)("svg",Object.assign({viewBox:"1 1 43 43",width:i/8,height:i/8,style:{transition:"all 0.1s ease-out",transform:t?"scale(1)":"scale(0.85)"}},{children:(0,o.jsx)("g",{children:n[e]})}))}))}function to(){let{boardOrientation:e,boardWidth:t,promotionDialogVariant:r,promoteToSquare:i}=e2(),n="1"===(null==i?void 0:i[1])?"b":"w",s=[`${null!=n?n:"w"}Q`,`${null!=n?n:"w"}R`,`${null!=n?n:"w"}N`,`${null!=n?n:"w"}B`],a={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-t/8}px, ${-t/8}px)`},vertical:{transform:`translate(${-t/16}px, ${-t/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*t/8}px)`,width:"100%",height:t/4+"px",top:0,backgroundColor:"white",left:0}},l=eZ(e,t,i||"a8");return(0,o.jsx)("div",Object.assign({style:Object.assign({position:"absolute",top:`${null==l?void 0:l.y}px`,left:`${null==l?void 0:l.x}px`,zIndex:1e3},a[r]),title:"Choose promotion piece"},{children:s.map(e=>(0,o.jsx)(ts,{option:e},e))}))}let ta={whiteKing:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:(0,o.jsx)("g",{children:(0,o.jsx)("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function tl({children:e}){try{return(0,o.jsx)(o.Fragment,{children:e})}catch(e){return console.log(e),(0,o.jsx)(tu,{showError:!0})}}function tu({showError:e=!1}){return(0,o.jsxs)("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[(0,o.jsx)("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:ta.whiteKing})),e&&(0,o.jsx)("h1",{children:"Something went wrong"})]}))}function tc(){let e=(0,a.useRef)(null),{boardWidth:t,clearCurrentRightClickDown:r,onPromotionPieceSelect:i,setShowPromoteDialog:n,showPromoteDialog:s,customBoardStyle:l}=e2();return(0,a.useEffect)(()=>{function t(t){e.current&&!e.current.contains(t.target)&&r()}return document.addEventListener("mouseup",t),()=>{document.removeEventListener("mouseup",t)}},[]),t?(0,o.jsx)("div",Object.assign({style:{perspective:"1000px"}},{children:(0,o.jsxs)("div",Object.assign({ref:e,style:Object.assign(Object.assign({position:"relative"},td(t)),l)},{children:[(0,o.jsx)(ti,{}),(0,o.jsx)(tn,{}),s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{onClick:()=>{n(!1),null==i||i()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:t,height:t}}),(0,o.jsx)(to,{})]})]}))})):(0,o.jsx)(tu,{})}let td=e=>({cursor:"default",height:e,width:e});function th({boardContainer:e}){let{boardWidth:t,chessPieces:r,id:i,snapToCursor:n,allowDragOutsideBoard:s}=e2(),l=function(e){let t=ev().getMonitor(),[r,i]=er(t,e);return(0,a.useEffect)(()=>t.subscribeToOffsetChange(i)),(0,a.useEffect)(()=>t.subscribeToStateChange(i)),r}(e=>({item:e.getItem(),clientOffset:e.getClientOffset(),sourceClientOffset:e.getSourceClientOffset(),isDragging:e.isDragging()})),{isDragging:u,item:c,clientOffset:d,sourceClientOffset:h}=l,g=(0,a.useCallback)((r,i)=>{if(!r||!i)return{display:"none"};let{x:o,y:a}=n?r:i,l=t/8/2;if(n&&(o-=l,a-=l),!s){let{left:r,top:i}=e,n=r+t-l,s=i+t-l;o=Math.max(r-l,Math.min(o,n)),a=Math.max(i-l,Math.min(a,s))}let u=`translate(${o}px, ${a}px)`;return{transform:u,WebkitTransform:u,touchAction:"none"}},[t,s,n,e]);return u&&c.id===i?(0,o.jsx)("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:(0,o.jsx)("div",Object.assign({style:g(d,h)},{children:"function"==typeof r[c.piece]?r[c.piece]({squareWidth:t/8,isDragging:!0}):(0,o.jsx)("svg",Object.assign({viewBox:"1 1 43 43",width:t/8,height:t/8},{children:(0,o.jsx)("g",{children:r[c.piece]})}))}))})):null}let tg=(0,a.forwardRef)((e,t)=>{let{customDndBackend:r,customDndBackendOptions:i}=e,n=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r}(e,["customDndBackend","customDndBackendOptions"]),[s,l]=(0,a.useState)(),[u,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(e.boardWidth),p=(0,a.useRef)(null),v=(0,a.useRef)(null),[m,b]=(0,a.useState)({left:0,top:0}),y=(0,a.useMemo)(()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect()},[p.current]);return(0,a.useEffect)(()=>{b({left:(null==y?void 0:y.left)?null==y?void 0:y.left:0,top:(null==y?void 0:y.top)?null==y?void 0:y.top:0})},[y]),(0,a.useEffect)(()=>{h("ontouchstart"in window),c(!0),l(window)},[]),(0,a.useEffect)(()=>{var t;if(void 0===e.boardWidth&&(null===(t=p.current)||void 0===t?void 0:t.offsetWidth)){let e=new ResizeObserver(()=>{var e;f(null===(e=p.current)||void 0===e?void 0:e.offsetWidth)});return e.observe(p.current),()=>{e.disconnect()}}},[p.current,s]),u&&s?(0,o.jsx)(tl,{children:(0,o.jsxs)("div",Object.assign({ref:v,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[(0,o.jsx)("div",{ref:p,style:{width:"100%"}}),(0,o.jsx)(J,Object.assign({backend:r||(d?e$:eA),context:s,options:r?i:void 0},{children:g&&(0,o.jsxs)(e3,Object.assign({boardWidth:g},n,{ref:t},{children:[(0,o.jsx)(th,{boardContainer:m}),(0,o.jsx)(tc,{})]}))}))]}))}):null})}};