"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[115],{47782:function(e,t,n){n.d(t,{Z:function(){return j}});var s=n(57437),a=n(33071),i=n(45623),r=n(67848),l=n(2265),o=function(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"45",height:"45",children:(0,s.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:[(0,s.jsx)("path",{strokeLinejoin:"miter",d:"M22.5 11.63V6"}),(0,s.jsx)("path",{fill:"#000",strokeLinecap:"butt",strokeLinejoin:"miter",d:"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5"}),(0,s.jsx)("path",{fill:"#000",d:"M11.5 37c5.5 3.5 15.5 3.5 21 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-3.5-7.5-13-10.5-16-4-3 6 5 10 5 10V37z"}),(0,s.jsx)("path",{strokeLinejoin:"miter",d:"M20 8h5"}),(0,s.jsx)("path",{stroke:"#ececec",d:"M32 29.5s8.5-4 6.03-9.65C34.15 14 25 18 22.5 24.5l.01 2.1-.01-2.1C20 18 9.906 14 6.997 19.85c-2.497 5.65 4.853 9 4.853 9"}),(0,s.jsx)("path",{stroke:"#ececec",d:"M11.5 30c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0"})]})})},c=n(85216),u=function(e){let{className:t}=e;return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"45",height:"45",className:t,children:[(0,s.jsxs)("defs",{children:[(0,s.jsx)("clipPath",{id:"a",children:(0,s.jsx)("rect",{width:"19.358",height:"38.632",x:"3.05",y:"2.617",opacity:"0.1",ry:"0"})}),(0,s.jsx)("clipPath",{id:"b",children:(0,s.jsx)("path",{d:"M22.492 3.814h18.647v37.85H22.492z",opacity:"0.1"})})]}),(0,s.jsx)("g",{clipPath:"url(#a)",transform:"translate(-5.082 -5.234)",children:(0,s.jsxs)("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:[(0,s.jsx)("path",{strokeLinejoin:"miter",d:"M22.5 11.63V6M20 8h5"}),(0,s.jsx)("path",{fill:"#fff",strokeLinecap:"butt",strokeLinejoin:"miter",d:"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5"}),(0,s.jsx)("path",{fill:"#fff",d:"M11.5 37c5.5 3.5 15.5 3.5 21 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-3.5-7.5-13-10.5-16-4-3 6 5 10 5 10V37z"}),(0,s.jsx)("path",{d:"M11.5 30c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0"})]})}),(0,s.jsx)("g",{clipPath:"url(#b)",transform:"translate(-5.166 -5.234)",children:(0,s.jsxs)("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:[(0,s.jsx)("path",{strokeLinejoin:"miter",d:"M22.5 11.63V6"}),(0,s.jsx)("path",{fill:"#000",strokeLinecap:"butt",strokeLinejoin:"miter",d:"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5"}),(0,s.jsx)("path",{fill:"#000",d:"M11.5 37c5.5 3.5 15.5 3.5 21 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-3.5-7.5-13-10.5-16-4-3 6 5 10 5 10V37z"}),(0,s.jsx)("path",{strokeLinejoin:"miter",d:"M20 8h5"}),(0,s.jsx)("path",{stroke:"#fff",d:"M32 29.5s8.5-4 6.03-9.65C34.15 14 25 18 22.5 24.5l.01 2.1-.01-2.1C20 18 9.906 14 6.997 19.85c-2.497 5.65 4.853 9 4.853 9"}),(0,s.jsx)("path",{stroke:"#fff",d:"M11.5 30c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0"})]})})]})},d=n(52623),h=n(24033);async function f(e){let{strength:t,variant:n,timeMode:s}=e,a=Date.now()/1e3,i=await fetch("".concat("http://fall2324w3g9.int3306.freeddns.org")+"/api/create-bot-game",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({strength:t,variant:n,time_mode:s,created_at:a})});if(i.ok){let e=await i.text(),t=JSON.parse(e);return t.data}throw Error("Create bot game not ok")}var m=n(90270),p=n(89913);let x=[{value:1,label:d.D5.STANDARD},{value:2,label:d.D5.CHESS960}],g=[{value:0,label:d.$i.UNLIMITED},{value:3,label:d.$i.ThreeMins},{value:5,label:d.$i.FiveMins},{value:7,label:d.$i.SevenMins}];function j(e){let{isOpen:t,setOpen:n}=e,[j,w]=l.useState(!1),[v,k]=l.useState(3),[S,y]=l.useState(1),[C,L]=l.useState(0),N=(0,h.useRouter)(),M=Array.from({length:8},(e,t)=>t+1),b=async e=>{await (0,m.Hc)({run:()=>(0,p.A)(),until:t=>t.includes(e)})},T=async()=>{w(!0);let e=await f({strength:v,variant:S,timeMode:C}),t=e.slug;console.log("HELO: ",e.slug),await b(t).then(e=>{console.error("Can't index game slug: ",e)}),localStorage.setItem("config-".concat(t),JSON.stringify({strength:v,variant:S,timeMode:C})),n(!1),w(!1),N.push("/computer/".concat(t))};return(0,s.jsx)(a.Z,{title:"Play vs Stockfish",open:t,onCancel:()=>{n(!1)},onOk:T,okButtonProps:{className:"!bg-blue-500"},okText:"Start Game",confirmLoading:j,children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 items-center center",children:[(0,s.jsxs)("div",{className:"flex justify-center center gap-4 items-center",children:[(0,s.jsx)("span",{className:"font-bold",children:"Variant"}),(0,s.jsx)(i.default,{defaultValue:1,options:x,style:{width:120},onChange:e=>{y(e)}})]}),(0,s.jsxs)("div",{className:"flex justify-center center gap-4 items-center",children:[(0,s.jsx)("span",{className:"font-bold",children:"Time Control"}),(0,s.jsx)(i.default,{defaultValue:d.$i.UNLIMITED,options:g,style:{width:120,marginRight:"37px"},onChange:e=>{e===d.$i.UNLIMITED?L(0):L(Number(e))}})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center center items-center gap-4",children:[(0,s.jsx)("span",{className:"font-bold",children:" Strength "}),(0,s.jsx)(r.ZP.Group,{options:M,value:v,optionType:"button",onChange:e=>{let{target:{value:t}}=e;k(t)}})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center center items-center gap-4",children:[(0,s.jsx)("span",{className:"font-bold",children:" Start with "}),(0,s.jsxs)(r.ZP.Group,{className:"flex flex-row gap-4",children:[(0,s.jsx)(r.ZP.Button,{value:"a",className:"w-fit h-fit py-2",children:(0,s.jsx)(o,{})}),(0,s.jsx)(r.ZP.Button,{value:"b",className:"w-fit h-fit py-2",children:(0,s.jsx)(u,{className:"ml-3"})}),(0,s.jsx)(r.ZP.Button,{value:"c",className:"w-fit h-fit py-2",children:(0,s.jsx)(c.Z,{})})]})]})]})})}},59762:function(e,t,n){n.d(t,{Z:function(){return k}});var s=n(57437),a=n(33071),i=n(91658),r=n(90270),l=n(89913);async function o(e){let{userId:t}=e,n=Date.now()/1e3,s=await fetch("".concat("http://fall2324w3g9.int3306.freeddns.org")+"/api/create-human-game",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({userId:t,created_at:n})});if(s.ok){let e=await s.text(),t=JSON.parse(e);return t.data}throw Error("Create human game not ok")}var c=n(24033),u=n(83570),d=n(88110),h=n.n(d),f=n(80338),m=n(43574),p=n(2265);let{Search:x}=m.default;function g(){return(0,s.jsx)(u.default,{defaultActiveKey:"1",size:"middle",style:{marginBottom:32},items:[,,].fill(null).map((e,t)=>{let n=t+1;return{label:1===n?"Create game":"Join game",key:String(n),children:(0,s.jsx)(j,{id:n})}})})}function j(e){let{id:t}=e;return 1===t?(0,s.jsx)(w,{}):(0,s.jsx)(v,{})}let w=()=>{let[e,t]=(0,p.useState)(!1),{userId:n}=(0,p.useContext)(i.UserContext),a=(0,c.useRouter)(),u=async e=>{await (0,r.Hc)({run:()=>(0,l.A)(),until:t=>t.includes(e)})},d=async()=>{if(t(!0),Number.isInteger(n)){let e=await o({userId:null!=n?n:0}),t=e.slug;await u(t).then(e=>{console.error("Can't index game slug: ",e)}),console.log("Human slug: ",t),a.push("/human/".concat(t))}else alert("Can't find your user id, please login first");t(!1)};return(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)("span",{children:" Create new online game "}),(0,s.jsx)("div",{children:(0,s.jsx)(h(),{onClick:d,className:"font-bold",loading:e,children:"Create"})})]})},v=()=>{let[e,t]=(0,p.useState)(!1),[n,a]=(0,p.useState)(""),[i,r]=(0,p.useState)([]),[o,u]=(0,p.useState)(""),d=(0,c.useRouter)();(0,p.useEffect)(()=>{try{u(window.location.href+"/human/")}catch(e){console.error("Can't parse game config: ",e,!1)}!async function(){let e=await (0,l.A)();r(e)}()},[]);let h=async e=>{t(!0),a(""),i.includes(e)?d.push("/human/".concat(e)):a("error"),t(!1)};return(0,s.jsxs)(f.default,{direction:"vertical",size:"middle",children:[!e&&""!==n&&(0,s.jsxs)("span",{className:"text-red-400",children:[" ","Could not found your game ID, please try again"," "]}),(0,s.jsx)(f.default.Compact,{children:(0,s.jsx)(x,{addonBefore:(0,s.jsx)(()=>{let e=o;return e.length>40&&(e=o.substring(0,19)+"...human/"),(0,s.jsx)("p",{style:{whiteSpace:"nowrap",width:"100%",overflow:"hidden",textOverflow:"clip ellipsis clip 0 1ch"},children:e})},{}),placeholder:"Your game id",allowClear:!1,onSearch:h,loading:e,status:n,onChange:()=>a("")})})]})};function k(e){let{isOpen:t,setOpen:n}=e;return(0,s.jsx)(a.Z,{title:"Play online",open:t,onCancel:()=>{n(!1)},footer:null,children:(0,s.jsx)(g,{})})}},85216:function(e,t,n){var s=n(57437);n(2265),t.Z=function(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"45",height:"45",children:(0,s.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:[(0,s.jsx)("path",{strokeLinejoin:"miter",d:"M22.5 11.63V6M20 8h5"}),(0,s.jsx)("path",{fill:"#fff",strokeLinecap:"butt",strokeLinejoin:"miter",d:"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5"}),(0,s.jsx)("path",{fill:"#fff",d:"M11.5 37c5.5 3.5 15.5 3.5 21 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-3.5-7.5-13-10.5-16-4-3 6 5 10 5 10V37z"}),(0,s.jsx)("path",{d:"M11.5 30c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0"})]})})}},91658:function(e,t,n){n.r(t),n.d(t,{UserContext:function(){return r},UserProvider:function(){return l}});var s=n(57437),a=n(2265);let i={userId:0,dateOfBirth:"",email:"",gender:"",name:"",rate:"",rating:[],accessToken:"",isLoading:!1},r=a.createContext({...i,checkLogin:()=>{}}),l=e=>{let[t,n]=(0,a.useState)(""),[l,o]=(0,a.useState)({...i,checkLogin:()=>{}}),[c,u]=(0,a.useState)(!1),d=async()=>{u(!0);let e=localStorage.getItem("accessToken");if(e){n(e);let t=await fetch("".concat("http://fall2324w3g9.int3306.freeddns.org")+"/api/profile",{method:"GET",headers:{"Content-Type":"application/json",accessToken:e}}),s=await t.json();(null==s?void 0:s.code)===200&&o(s.data)}else o({...i,checkLogin:()=>{}});u(!1)};return(0,a.useEffect)(()=>{d().then()},[]),(0,s.jsx)(r.Provider,{value:{userId:null==l?void 0:l.userId,dateOfBirth:null==l?void 0:l.dateOfBirth,email:null==l?void 0:l.email,gender:null==l?void 0:l.gender,name:null==l?void 0:l.name,rate:null==l?void 0:l.rate,rating:null==l?void 0:l.rating,accessToken:t,isLoading:c,checkLogin:d},children:e.children})}},52623:function(e,t,n){var s,a,i,r,l,o,c;n.d(t,{$i:function(){return r},D$:function(){return a},D5:function(){return i},x6:function(){return s}}),n(2265),(s||(s={})).FACEBOOK="FACEBOOK",(l=a||(a={})).FAST="Fast Chess",l.SLOW="Slow",l.PUZZLE="Puzzle",l.STARS="Stars",(o=i||(i={})).STANDARD="Standard",o.CHESS960="Chess960",(c=r||(r={})).UNLIMITED="Unlimited",c.ThreeMins="3 minutues",c.FiveMins="5 minutes",c.SevenMins="7 minutes"},90270:function(e,t,n){n.d(t,{Hc:function(){return s}});async function s(e){let t,{run:n,until:s,maxIterations:a=Number.MAX_SAFE_INTEGER,delayBetween:i=1e3}=e;for(let e=0;e<a;e++){0!==e&&await function(e){return new Promise(t=>{setTimeout(t,e)})}(i);try{let t=await n(e),a=await s(t);if(a)return t}catch(e){t=e}}throw Error("max iterations reached without success",{cause:t})}},89913:function(e,t,n){n.d(t,{A:function(){return s}});async function s(){var e;let t=await fetch("".concat("http://fall2324w3g9.int3306.freeddns.org")+"/api/all-game-slugs",{cache:"no-store"}).then(e=>e.json());if("Success"===t.message)return t.data;throw Error(null!==(e=t.message)&&void 0!==e?e:"Get game slugs error")}}}]);