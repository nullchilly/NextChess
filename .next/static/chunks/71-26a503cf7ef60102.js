(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71],{34071:function(e,t,r){Promise.resolve().then(r.bind(r,41941))},41941:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ChessGame_ChessGame}});var a=r(57437),s=r(45303),n=r(2265),l=r(54949),i=r(96061),o=r(57042),d=r(23986);let cn=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,d.m)((0,o.W)(t))},c=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:i=!1,...o}=e,d=i?l.g7:"button";return(0,a.jsx)(d,{className:cn(c({variant:s,size:n,className:r})),ref:t,...o})});u.displayName="Button";let m=n.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});m.displayName="Input";var Controls_Controls=e=>{let{startGame:t,resetGame:r,type:s,depth:n,setDepth:l}=e;return(0,a.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,a.jsx)(u,{className:"w-full",onClick:()=>t(),children:"Start Game"}),(0,a.jsx)(u,{className:"w-full",onClick:()=>r(),children:"Reset Game"}),"minimax"===s&&(0,a.jsx)(m,{type:"number",placeholder:"Depth",min:1,max:5,value:n,onChange:e=>{let t=Number(e.target.value);l(t)}})]})},x=r(3560),f=r(16691),h=r.n(f),MoveList_MoveItem=e=>{let{move:t}=e;return(0,a.jsx)("li",{className:"flex justify-between gap-x-6 py-2 px-4",children:(0,a.jsxs)("div",{className:"flex min-w-0 gap-x-6",children:[(0,a.jsx)(h(),{className:"flex-none rounded-full",src:(0,x.vX)(t.color,t.piece),alt:"Chess Piece",width:45,height:45}),(0,a.jsxs)("div",{className:"min-w-0 flex-auto",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold leading-6 text-gray-900",children:["b"===t.color?"Black":"White"," Move"]}),(0,a.jsxs)("p",{className:"mt-1 truncate text-xs leading-5 text-gray-500",children:["From: ",t.from," | To: ",t.to]})]})]})})},Card_PlayerInfoCard=e=>{let{id:t,name:r,inGame:s}=e;return(0,a.jsx)("div",{className:"bg-white",children:(0,a.jsxs)("div",{className:"w-auto flex pl-4 flex-col items-center",children:[s&&(0,a.jsx)("div",{className:"font-bold text-center",style:{fontSize:"25px"},children:r||"none"}),(0,a.jsx)("div",{children:(0,a.jsx)("img",{src:(0,x.KK)(r),className:"h-[250px]",alt:">"})}),!s&&(0,a.jsx)("div",{className:"font-bold text-center",style:{fontSize:"25px"},children:r||"none"})]})})},MoveList_MoveList=e=>{let{moves:t,bot:r}=e;return(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"flex pt-4 pb-4",children:(0,a.jsxs)("ul",{className:"max-h-[550px] h-[550px] w-[450px] overflow-y-auto divide-y border rounded-lg",children:[(0,a.jsx)("li",{className:"sticky top-0",children:(0,a.jsx)(Card_PlayerInfoCard,{id:r.id,name:r.name,inGame:!0})}),(0,a.jsx)("div",{children:null==t?void 0:t.map((e,t)=>(0,a.jsx)(MoveList_MoveItem,{move:e},t))})]})})})},v=r(48916);let reverseArray=e=>e.slice().reverse(),p=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],g=reverseArray(p),b=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],j=[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],y=reverseArray(j),w=[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],N=reverseArray(w),C=[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],k=[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]],_=reverseArray(k),evaluateBoard=e=>{let t=0;for(let r=0;r<8;r++)for(let a=0;a<8;a++)t+=getPieceValue(e[r][a],r,a);return t},getPieceValue=(e,t,r)=>{if(null===e)return 0;let a=function(e,t,r,a){switch(e){case"p":return 10+(t?p[a][r]:g[a][r]);case"n":return 30+b[a][r];case"b":return 30+(t?j[a][r]:y[a][r]);case"r":return 50+(t?w[a][r]:N[a][r]);case"q":return 90+C[a][r];case"k":return 900+(t?k[a][r]:_[a][r]);default:throw"Unknown piece type: "+e}}(e.type,"w"===e.color,t,r);return"w"===e.color?a:-a};var hooks_useChess=e=>{let[t,r]=(0,n.useState)(new v.qQ),[a,s]=(0,n.useState)(!1),[l,i]=(0,n.useState)([]),[o,d]=(0,n.useState)(3),[c,u]=(0,n.useState)(),getComputerType=()=>"random"===e?calculateRandomMove:"computer"===e?calculateBestMove:calculateMinimaxMove,makeMove=e=>{let a={...t},s=a.move(e);return s&&(i(e=>[s,...e]),r(a)),s},calculateRandomMove=()=>{let e=t.moves();if(t.game_over()||t.in_draw()||e.length<=0)return;let r=Math.floor(Math.random()*e.length);makeMove(e[r])},calculateBestMove=()=>{let e=t.moves();if(t.game_over()||t.in_draw()||e.length<=0)return;let r=null,a=-9999;for(let s of e){t.move(s);let e=-evaluateBoard(t.board());t.undo(),e>=a&&(a=e,r=s)}null!==r&&makeMove(r)},minimax=(e,t,r,a,s)=>{if(e<=0)return-evaluateBoard(t.board());let n=t.moves();if(s){let l=-9999;for(let i of n)if(t.move(i),l=Math.max(l,minimax(e-1,t,r,a,!s)),t.undo(),a<=(r=Math.max(r,l)))break;return l}{let l=9999;for(let i of n)if(t.move(i),l=Math.min(l,minimax(e-1,t,r,a,!s)),t.undo(),(a=Math.min(a,l))<=r)break;return l}},calculateMinimaxMove=()=>{let e=t.moves();if(t.game_over()||t.in_draw()||e.length<=0)return;let r=null,a=-9999;for(let s of e){t.move(s);let e=minimax(o-1,t,-1e4,1e4,!1);t.undo(),e>=a&&(a=e,r=s)}null!==r&&makeMove(r)},resetGame=()=>{let e={...t};e.reset(),r(e),i([]),c&&clearTimeout(c),s(!1)};return{game:t,playing:a,moves:l,depth:o,setDepth:d,onPieceDrop:(e,t)=>{if(!a)return!1;let r=makeMove({from:e,to:t,promotion:"q"});if(null===r)return!1;let s=setTimeout(getComputerType(),500);return u(s),!0},startGame:()=>{resetGame(),s(!0)},resetGame}},M=r(28170),S=r(2114),P=r(20020),B=r(18142),G=r(67896),z=r(88110),K=r.n(z),Card_PlayerCard=e=>{let{avtRef:t,name:r,link:s}=e;return(0,a.jsx)("div",{className:"flex pt-4 pb-4",children:(0,a.jsx)(M.default,{className:"w-full justify-center relative",children:(0,a.jsxs)(P.default,{align:"middle",children:[(0,a.jsx)(B.default,{flex:"50px",children:(0,a.jsx)(S.ZP,{src:t||"https://bit.ly/3FzLkSs"})}),(0,a.jsx)(B.default,{className:"flex-auto font-bold",style:{fontSize:"20px"},children:r}),(0,a.jsx)(B.default,{children:(0,a.jsx)(G.Z,{menu:{items:[{label:"1st menu item",key:"1"},{label:"2nd menu item",key:"2"},{label:"3rd menu item",key:"3"}]},placement:"bottomRight",arrow:{pointAtCenter:!0},children:(0,a.jsx)(K(),{className:"flex",children:(0,a.jsx)("img",{src:(0,x.KK)("meatballs-menu"),width:"20px",height:"20px",alt:">"})})})})]})})})};let BotCard=e=>{let{id:t,name:r}=e;return(0,a.jsx)("div",{className:"hover:opacity-60",children:(0,a.jsx)("img",{className:"w-[60px] h-[60px] border-2",src:(0,x.KK)(r),alt:"character"})})};var Card_BotSelector=e=>{let{botList:t,onSelectBot:r}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-center pt-4",style:{fontSize:"20px"},children:"Ez Bot"}),(0,a.jsx)("div",{className:"w-auto flex row-auto pl-4 flex-wrap",children:t.map(e=>(0,a.jsx)("div",{className:"p-2",onClick:()=>{r(e)},children:(0,a.jsx)(BotCard,{id:e.id,name:e.name})},e.id))})]})},Card_PrepareCard=e=>{let{botList:t,onSelectBot:r,bot:s}=e;return(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"flex pt-4 pb-4",children:(0,a.jsxs)("ul",{className:"max-h-[550px] h-[550px] w-auto overflow-y-auto divide-y border rounded-lg",children:[(0,a.jsx)("div",{className:"w-[450px] text-center font-bold flex-wrap p-4",style:{fontSize:"27px"},children:"Play Chess Against a Computer"}),(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(Card_PlayerInfoCard,{id:s.id,name:s.name,inGame:!1})}),(0,a.jsx)("div",{children:(0,a.jsx)(Card_BotSelector,{botList:t,onSelectBot:r})})]})})})},ChessGame_ChessGame=e=>{let{id:t,type:r}=e,{game:l,moves:i,playing:o,depth:d,setDepth:c,onPieceDrop:u,startGame:m,resetGame:f}=hooks_useChess(r),[h,v]=(0,n.useState)([]),[p,g]=(0,n.useState)({id:"0",name:"shark"});return(0,n.useEffect)(()=>{v([{id:"0",name:"shark"},{id:"1",name:"elephant"},{id:"2",name:"owl"},{id:"3",name:"monkey"},{id:"4",name:"penguin"},{id:"5",name:"cat"}])},[]),(0,a.jsxs)("div",{className:"flex p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex justify-center w-2/3",children:(0,a.jsxs)("div",{className:"w-[450px]",children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)(Card_PlayerCard,{avtRef:p?(0,x.KK)(p.name):"",name:p?p.name:"none",link:p?"/home":"/profile/chien"})}),!o&&(0,a.jsx)("div",{className:"absolute flex justify-center items-center w-[450px] h-[450px] z-10"}),(0,a.jsx)(s.r,{id:t,onPieceDrop:u,position:l.fen(),customBoardStyle:{borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.5)"}}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(Card_PlayerCard,{avtRef:"",name:"Chien",link:"/profile/chien"})})]})}),(0,a.jsx)("div",{className:"flex justify-center w-1/3",children:(0,a.jsxs)("div",{children:[o?(0,a.jsx)(MoveList_MoveList,{moves:i,bot:p||{id:"0",name:"shark"}}):(0,a.jsx)(Card_PrepareCard,{botList:h,onSelectBot:e=>{g(e)},bot:p||{id:"0",name:"shark"}}),(0,a.jsx)(Controls_Controls,{startGame:m,resetGame:f,type:r,depth:d,setDepth:c})]})})]})}},3560:function(e,t,r){"use strict";r.d(t,{KK:function(){return getSvgSrc},TO:function(){return getYoutubeThumbnail},vX:function(){return getPieceSrc}});let getPieceSrc=(e,t)=>"assets/".concat(e,"_").concat(t,".svg");function getYoutubeThumbnail(e){let t=e.split("v=")[1];if(!t)throw Error("Invalid YouTube video URL");return"https://img.youtube.com/vi/".concat(t,"/0.jpg")}let getSvgSrc=e=>"assets/".concat(e,".svg")}}]);