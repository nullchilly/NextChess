(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{7915:function(e,t,s){Promise.resolve().then(s.bind(s,87355))},87355:function(e,t,s){"use strict";s.r(t);var r=s(57437),n=s(61396),a=s.n(n),o=s(2265),l=s(99654),c=s(24033),i=s(91658);t.default=function(){let[e,t]=(0,o.useState)({user_name:"",password:""}),[s,n]=(0,o.useState)(!0),[d,u]=(0,o.useState)(!0),[x,f]=(0,o.useState)(!0),h=(0,c.useRouter)(),{checkLogin:m}=(0,o.useContext)(i.UserContext);(0,o.useEffect)(()=>{localStorage.getItem("accessToken")&&h.push("/profile")},[]);let g=async t=>{t.preventDefault();let s=!1;if(""==e.user_name?(u(!1),s=!0):u(!0),""==e.password?(n(!1),s=!0):n(!0),!s)try{let t=await fetch("".concat("http://fall2324w3g9.int3306.freeddns.org")+"/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json(),s=e.data.accessToken;s&&localStorage.setItem("accessToken",s),f(!0),m&&await m(),h.push("/profile")}else console.error("Login failed:",t.statusText),f(!1)}catch(e){console.error("An unexpected error occurred:",e)}},p=s=>{t({...e,[s.target.name]:s.target.value})};return(0,r.jsx)("div",{className:"relative flex flex-col items-center justify-center min-h-screen overflow-hidden",children:(0,r.jsxs)("div",{className:"w-full p-6 bg-white rounded-md shadow-xl lg:max-w-xl border",children:[(0,r.jsxs)("div",{className:"flex justify-center",children:[(0,r.jsx)("div",{className:"text-4xl font-extrabold text-center text-gray-800 not-italic",children:"Next Chess"}),(0,r.jsx)(l.Z,{width:45,height:45})]}),(0,r.jsxs)("form",{className:"mt-4",onSubmit:g,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-lg font-bold text-gray-700",children:"Username"}),(0,r.jsx)("input",{type:"username",name:"user_name",onChange:p,className:"block w-full px-2 py-2 mt-2 text-gray-700 bg-white border rounded-lg focus:border-gray-800 focus:ring-gray-300"}),!d&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:"Enter your Username."})]}),(0,r.jsxs)("div",{className:"mb-",children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-lg font-bold text-gray-700",children:"Password"}),(0,r.jsx)("input",{type:"password",name:"password",onChange:p,className:"block w-full px-2 py-2 mt-2 mb-2 text-gray-700 bg-white border rounded-lg focus:border-gray-800 focus:ring-gray-300"}),!s&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:"Enter your Password."}),!x&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:"UserName or Password is wrong."})]}),(0,r.jsx)(a(),{href:"/forget",className:"text-base text-blue-700 hover:underline font-semibold",children:"Forget Password?"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("button",{className:"w-full px-4 py-2 font-bold text-white bg-gray-700 rounded-md hover:bg-gray-500",children:"Login"})})]}),(0,r.jsxs)("p",{className:"mt-4 text-base text-center text-gray-700",children:["Don't have an account?"," ",(0,r.jsx)(a(),{href:"/signup",className:"text-base text-blue-700 hover:underline font-semibold",children:"Sign up"})]})]})})}},99654:function(e,t,s){"use strict";var r=s(57437);s(2265),t.Z=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:45,height:45,...e,children:(0,r.jsxs)("g",{style:{fill:"#000",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"},children:[(0,r.jsx)("path",{d:"M9 26c8.5-1.5 21-1.5 27 0l2.5-12.5L31 25l-.3-14.1-5.2 13.6-3-14.5-3 14.5-5.2-13.6L14 25 6.5 13.5 9 26z",style:{strokeLinecap:"butt",fill:"#000"}}),(0,r.jsx)("path",{d:"M9 26c0 2 1.5 2 2.5 4 1 1.5 1 1 .5 3.5-1.5 1-1 2.5-1 2.5-1.5 1.5 0 2.5 0 2.5 6.5 1 16.5 1 23 0 0 0 1.5-1 0-2.5 0 0 .5-1.5-1-2.5-.5-2.5-.5-2 .5-3.5 1-2 2.5-2 2.5-4-8.5-1.5-18.5-1.5-27 0z"}),(0,r.jsx)("path",{d:"M11.5 30c3.5-1 18.5-1 22 0M12 33.5c6-1 15-1 21 0"}),(0,r.jsx)("circle",{cx:6,cy:12,r:2}),(0,r.jsx)("circle",{cx:14,cy:9,r:2}),(0,r.jsx)("circle",{cx:22.5,cy:8,r:2}),(0,r.jsx)("circle",{cx:31,cy:9,r:2}),(0,r.jsx)("circle",{cx:39,cy:12,r:2}),(0,r.jsx)("path",{d:"M11 38.5a35 35 1 0 0 23 0",style:{fill:"none",stroke:"#000",strokeLinecap:"butt"}}),(0,r.jsx)("g",{style:{fill:"none",stroke:"#fff"},children:(0,r.jsx)("path",{d:"M11 29a35 35 1 0 1 23 0M12.5 31.5h20M11.5 34.5a35 35 1 0 0 22 0M10.5 37.5a35 35 1 0 0 24 0"})})]})})},91658:function(e,t,s){"use strict";s.r(t),s.d(t,{UserContext:function(){return o},UserProvider:function(){return l}});var r=s(57437),n=s(2265);let a={userId:0,dateOfBirth:"",email:"",gender:"",name:"",rate:"",rating:[],accessToken:"",isLoading:!1,isAdmin:!1},o=n.createContext({...a,checkLogin:()=>{}}),l=e=>{let[t,s]=(0,n.useState)(""),[l,c]=(0,n.useState)({...a,checkLogin:()=>{}}),[i,d]=(0,n.useState)(!1),u=async()=>{d(!0);let e=localStorage.getItem("accessToken");if(console.log("token",e),e){s(e);let t=await fetch("".concat("http://fall2324w3g9.int3306.freeddns.org")+"/api/profile",{method:"GET",headers:{"Content-Type":"application/json",accessToken:e}}),r=await t.json();(null==r?void 0:r.code)===200&&c(r.data)}else c({...a,checkLogin:()=>{}});d(!1)};return(0,n.useEffect)(()=>{u().then()},[]),(0,r.jsx)(o.Provider,{value:{userId:l.userId,dateOfBirth:null==l?void 0:l.dateOfBirth,email:null==l?void 0:l.email,gender:null==l?void 0:l.gender,name:null==l?void 0:l.name,rate:null==l?void 0:l.rate,rating:null==l?void 0:l.rating,accessToken:t,isLoading:i,isAdmin:null==l?void 0:l.isAdmin,checkLogin:u},children:e.children})}},30622:function(e,t,s){"use strict";var r=s(2265),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,s){var r,a={},i=null,d=null;for(r in void 0!==s&&(i=""+s),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:n,type:e,key:i,ref:d,props:a,_owner:l.current}}t.Fragment=a,t.jsx=i,t.jsxs=i},57437:function(e,t,s){"use strict";e.exports=s(30622)},24033:function(e,t,s){e.exports=s(50094)}},function(e){e.O(0,[1396,2971,2472,1744],function(){return e(e.s=7915)}),_N_E=e.O()}]);