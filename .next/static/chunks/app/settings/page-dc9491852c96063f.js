(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6938],{39830:function(e,t,l){Promise.resolve().then(l.bind(l,31443))},31443:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return v}});var s=l(57437),n=l(2265),a=l(91658),o=l(24033),r=l(7429),c=l(88110),d=l.n(c),i=l(9273),x=l(80568),f=l(21085),m=l(79404),u=l(43574),h=l(45623),g=l(49385);l(16531);var p=l(74548),b=l.n(p),j=()=>{let{name:e,dateOfBirth:t,gender:l,email:r,checkLogin:c,isLoading:p,accessToken:j}=(0,n.useContext)(a.UserContext),v=(0,o.useRouter)(),[N]=m.Z.useForm(),[w,k]=(0,n.useState)(!1),[y,C]=(0,n.useState)(!1),O=()=>{N.validateFields().then(e=>{k(!0);let t=JSON.stringify({...e,dateOfBirth:e.dateOfBirth.format("YYYY-MM-DD")});fetch("".concat("http://fall2324w3g9.int3306.freeddns.org")+"/api/profile",{method:"POST",headers:{"Content-Type":"application/json",accessToken:j},body:t}).then(e=>{e.ok&&c()}).finally(()=>{k(!1)})})},S=()=>{k(!0),N.setFieldsValue({name:e,dateOfBirth:b()(t||""),gender:l,email:r}),k(!1)};return(0,n.useEffect)(()=>{localStorage.getItem("accessToken")||v.push("/login")},[]),(0,n.useEffect)(()=>{S()},[p]),(0,s.jsxs)("div",{className:"bg-[#477330] pt-4 pb-4 rounded-lg shadow-md w-full row-auto",children:[(0,s.jsxs)("div",{className:"grid",children:[(0,s.jsx)("div",{className:"object-cover h-full w-full flex items-center justify-end",children:(0,s.jsx)("img",{src:"https://www.chesskid.com/images/avatars/kids/100/kid-1162.png",alt:"image description",className:"shadow rounded-full max-w-full h-auto align-middle border-none"})}),(0,s.jsx)("div",{className:"col-start-2 col-end-4 text-6xl text-slate-100 font-mono font-bold flex items-center pl-7",children:"Account"})]}),(0,s.jsx)("div",{className:"grid grid-cols-4 pt-10",children:(0,s.jsx)("div",{className:"col-start-2 col-end-4 text-6xl text-slate-100 font-mono font-bold flex items-center pl-7",children:(0,s.jsxs)(m.Z,{layout:"vertical",form:N,initialValues:{name:e,dateOfBirth:b()(),gender:l,email:r},style:{maxWidth:1e3,width:500},onFinish:O,children:[(0,s.jsxs)(g.default,{spinning:p||w,children:[(0,s.jsx)(m.Z.Item,{label:(0,s.jsx)("p",{className:"col-start-2 col-end-4 text-3xl text-slate-100 font-mono font-bold flex items-center pl-5",children:"Name"}),name:"name",children:(0,s.jsx)(u.default,{className:"bg-[#385c26] text-slate-100 p-4 rounded-lg grid grid-cols-4 text-2xl border-4 border-transparent hover:border-[#6ab148] focus:border-[#6ab148] ",disabled:!y})}),(0,s.jsx)(m.Z.Item,{label:(0,s.jsx)("p",{className:"col-start-2 col-end-4 text-3xl text-slate-100 font-mono font-bold flex items-center pl-5",children:"Date of Birth"}),name:"dateOfBirth",children:(0,s.jsx)(x.Z,{format:"YYYY-MM-DD",className:"bg-[#385c26] p-4 rounded-lg grid grid-cols-4 text-2xl border-4 border-transparent hover:border-[#6ab148] focus:border-[#6ab148]",disabled:!y})}),(0,s.jsx)(i.default,{theme:{components:{Select:{optionSelectedBg:"#6ab148",colorPrimary:"#6ab148",optionSelectedColor:"#000000"}}},children:(0,s.jsx)(m.Z.Item,{label:(0,s.jsx)("p",{className:"col-start-2 col-end-4 text-3xl text-slate-100 font-mono font-bold flex items-center pl-5",children:"Gender"}),name:"gender",className:"pb-4",children:(0,s.jsxs)(h.default,{popupClassName:"border-4 bg-[#385c26] rounded-lg border-transparent font-bold",disabled:!y,children:[(0,s.jsx)(h.default.Option,{value:"male",children:(0,s.jsx)("div",{className:"text-2xl text-slate-100 font-mono font-bold flex",children:"Male"})}),(0,s.jsx)(h.default.Option,{value:"female",children:(0,s.jsx)("div",{className:"text-2xl text-slate-100 font-mono font-bold flex",children:"Female"})}),(0,s.jsx)(h.default.Option,{value:"Other",children:(0,s.jsx)("div",{className:"text-2xl text-slate-100 font-mono font-bold flex",children:"Other"})})]})})}),(0,s.jsx)(m.Z.Item,{label:(0,s.jsx)("p",{className:"col-start-2 col-end-4 text-3xl text-slate-100 font-mono font-bold flex items-center pl-5 pt-2",children:"Email"}),name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"}],children:(0,s.jsx)(u.default,{className:"bg-[#385c26] text-slate-100 p-4 rounded-lg grid grid-cols-4 text-2xl border-4 border-transparent hover:border-[#6ab148] focus:border-[#6ab148] ",disabled:!y})})]}),(0,s.jsxs)(f.Z,{gap:"small",className:"grid grid-cols-2 mt-5",children:[y?(0,s.jsx)(d(),{className:"bg-[#e8822c] flex items-center p-7 hover:bg-[#f59543] border-0 w-fit",onClick:()=>{C(!1),O()},children:(0,s.jsx)("p",{className:"col-start-2 col-end-4 text-3xl text-slate-100 font-mono font-bold flex text-center",children:"Save"})}):(0,s.jsx)(d(),{onClick:()=>{C(!0)},className:"bg-[#e8822c] flex items-center p-7 hover:bg-[#f59543] border-0  w-fit",children:(0,s.jsx)("p",{className:"col-start-2 col-end-4 text-3xl text-slate-100 font-mono font-bold flex text-center",children:"Change Profile"})}),(0,s.jsx)("div",{className:"place-self-end",children:y?(0,s.jsx)(d(),{type:"text",className:"bg-transparent flex items-center p-7",onClick:()=>{C(!1),S()},children:(0,s.jsx)("p",{className:"col-start-2 col-end-4 text-3xl text-slate-100 font-mono font-bold flex text-center",children:"Cancel"})}):(0,s.jsx)(d(),{type:"text",className:"bg-transparent flex items-center p-7",onClick:()=>{localStorage.removeItem("accessToken"),c(),v.push("/login")},children:(0,s.jsx)("p",{className:"col-start-2 col-end-4 text-3xl text-slate-100 font-mono font-bold flex text-center",children:"Logout"})})})]})]})})})]})},v=()=>{let{name:e}=(0,n.useContext)(a.UserContext),t=(0,o.useRouter)();return(0,n.useEffect)(()=>{let e=localStorage.getItem("accessToken");e||t.push("/login")},[]),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"rw-full sm:w-full md:w-full p-4",children:(0,r.Z)({key:!0})}),(0,s.jsx)("div",{className:"rw-full sm:w-full md:w-full p-4",children:(0,s.jsx)("div",{className:"bg-[#477330] rounded-lg p-4",children:j()})})]})}},7429:function(e,t,l){"use strict";var s=l(57437),n=l(61396),a=l.n(n);t.Z=e=>(0,s.jsx)("nav",{className:"bg-[#477330] p-4 rounded-lg shadow-md",children:(0,s.jsx)("div",{className:"items-center justify-center mx-auto sp",children:(0,s.jsxs)("div",{className:"flex md:flex md:space-x-4 mx-auto",children:[(0,s.jsx)("div",{className:"flex-grow text-slate-100 font-mono p-4 hover:bg-[#4f8536] transition-colors rounded-lg ".concat(e.key?"bg-[#58943c]":""),children:(0,s.jsx)(a(),{href:"/settings",className:"",children:(0,s.jsx)("div",{className:"col-start-2 col-end-4 text-3xl text-slate-100 font-mono font-bold flex justify-center",children:"Account"})})},0),(0,s.jsx)("div",{className:"flex-grow text-slate-100 font-mono p-4 hover:bg-[#4f8536] transition-colors rounded-lg ".concat(e.key?"":"bg-[#58943c]"),children:(0,s.jsx)(a(),{href:"/settings/password",className:"",children:(0,s.jsx)("div",{className:"col-start-2 col-end-4 text-3xl text-slate-100 font-mono font-bold flex justify-center",children:"Change Password"})})},0)]})})})},91658:function(e,t,l){"use strict";l.r(t),l.d(t,{UserContext:function(){return o},UserProvider:function(){return r}});var s=l(57437),n=l(2265);let a={userId:0,dateOfBirth:"",email:"",gender:"",name:"",rate:"",rating:[],accessToken:"",isLoading:!1,isAdmin:!1},o=n.createContext({...a,checkLogin:()=>{}}),r=e=>{let[t,l]=(0,n.useState)(""),[r,c]=(0,n.useState)({...a,checkLogin:()=>{}}),[d,i]=(0,n.useState)(!1),x=async()=>{i(!0);let e=localStorage.getItem("accessToken");if(console.log("token",e),e){l(e);let t=await fetch("".concat("http://fall2324w3g9.int3306.freeddns.org")+"/api/profile",{method:"GET",headers:{"Content-Type":"application/json",accessToken:e}}),s=await t.json();(null==s?void 0:s.code)===200&&c(s.data)}else c({...a,checkLogin:()=>{}});i(!1)};return(0,n.useEffect)(()=>{x().then()},[]),(0,s.jsx)(o.Provider,{value:{userId:r.userId,dateOfBirth:null==r?void 0:r.dateOfBirth,email:null==r?void 0:r.email,gender:null==r?void 0:r.gender,name:null==r?void 0:r.name,rate:null==r?void 0:r.rate,rating:null==r?void 0:r.rating,accessToken:t,isLoading:d,isAdmin:null==r?void 0:r.isAdmin,checkLogin:x},children:e.children})}},16531:function(){}},function(e){e.O(0,[6227,1094,5279,7197,8110,8623,4195,8813,1396,9431,5623,3574,9385,5880,7834,2971,2472,1744],function(){return e(e.s=39830)}),_N_E=e.O()}]);